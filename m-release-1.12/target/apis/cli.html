<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.1-SNAPSHOT Documentation: Command-Line Interface</title>
    <link rel="shortcut icon" href="/page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/page/favicon.ico" type="image/x-icon">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="/page/css/flink.css">
    <link rel="stylesheet" href="/page/css/syntax.css">
    <link rel="stylesheet" href="/page/css/codetabs.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    
    





    <!-- Top navbar. -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- The logo. -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="navbar-logo">
            <a href="http://flink.apache.org"><img alt="Apache Flink" src="/page/img/navbar-brand-logo.jpg"></a>
          </div>
        </div><!-- /.navbar-header -->

        <!-- The navigation links. -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li class="hidden-sm "><a href="/">Docs v1.1</a></li>

            <li class=""><a href="/concepts/concepts.html">Concepts</a></li>

            <!-- Setup -->
            <li class="dropdown">
              <a href="/setup" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Setup <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                
                
                <li class=""><a href="/setup/building.html">Build Flink from Source</a></li>
                
                <li class=""><a href="/setup/config.html">Configuration</a></li>
                

                <li class="divider"></li>
                <li role="presentation" class="dropdown-header"><strong>Quickstart</strong></li>

                <!-- Quickstart -->
                
                
                <li class=""><a href="/quickstart/setup_quickstart.html">Setup & Run Example</a></li>
                
                <li class=""><a href="/quickstart/java_api_quickstart.html">Java API</a></li>
                
                <li class=""><a href="/quickstart/scala_api_quickstart.html">Scala API</a></li>
                

                <li class="divider"></li>
                <li role="presentation" class="dropdown-header"><strong>Deployment</strong></li>
                
                
                <li class=""><a href="/setup/local_setup.html">Local</a></li>
                
                <li class=""><a href="/setup/cluster_setup.html">Cluster (Standalone)</a></li>
                
                <li class=""><a href="/setup/yarn_setup.html">YARN</a></li>
                
                <li class=""><a href="/setup/gce_setup.html">Google Compute Engine</a></li>
                
                <li class=""><a href="/setup/aws.html">AWS</a></li>
                
                <li class=""><a href="/setup/jobmanager_high_availability.html">High Availability</a></li>
                
              </ul>
            </li>

            <!-- Programming Guides -->
            <li class="dropdown active">
              <a href="/apis" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Programming Guides <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                
                
                <li class=""><a href="/apis/common/index.html"><strong>Basic API Concepts</strong></a></li>
                
                <li class=""><a href="/apis/streaming/index.html"><strong>Streaming Guide</strong> (DataStream API)</a></li>
                
                <li class=""><a href="/apis/batch/index.html"><strong>Batch Guide</strong> (DataSet API)</a></li>
                
                <li class=""><a href="/apis/best_practices.html">Best Practices</a></li>
                
                <li class=""><a href="/apis/table.html">Table API and SQL</a></li>
                
                <li class="active"><a href="/apis/cli.html">Command-Line Interface</a></li>
                
                <li class=""><a href="/apis/local_execution.html">Local Execution</a></li>
                
                <li class=""><a href="/apis/cluster_execution.html">Cluster Execution</a></li>
                
                <li class=""><a href="/apis/scala_shell.html">Scala Shell</a></li>
                
                <li class=""><a href="/apis/scala_api_extensions.html">Scala API Extensions</a></li>
                
                <li class=""><a href="/apis/java8.html">Java 8</a></li>
                
              </ul>
            </li>

            <!-- Libraries -->
            <li class="dropdown">
              <a href="/libs" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Libraries <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  
                  
                  <li class=""><a href="/apis/batch/libs/gelly.html">Graphs: Gelly</a></li>
                  
                  <li class=""><a href="/apis/streaming/libs/cep.html">CEP</a></li>
                  
                  <li class=""><a href="/apis/batch/libs/ml/index.html">Machine Learning</a></li>
                  
              </ul>
            </li>

            <!-- Internals -->
            <li class="dropdown">
              <a href="/internals" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Internals <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li role="presentation" class="dropdown-header"><strong>Contribute</strong></li>
                <li><a href="http://flink.apache.org/how-to-contribute.html"><small><span class="glyphicon glyphicon-new-window"></span></small> How to Contribute</a></li>
                <li><a href="http://flink.apache.org/contribute-code.html#coding-guidelines"><small><span class="glyphicon glyphicon-new-window"></span></small> Coding Guidelines</a></li>
                
                
                <li class=""><a href="/internals/ide_setup.html">IDE Setup</a></li>
                
                <li class=""><a href="/internals/logging.html">Logging</a></li>
                
                <li class=""><a href="/internals/general_arch.html">Architecture and Process Model</a></li>
                
                <li class=""><a href="/internals/stream_checkpointing.html">Fault Tolerance for Data Streaming</a></li>
                
                <li class=""><a href="/internals/types_serialization.html">Type Extraction and Serialization</a></li>
                
                <li class=""><a href="/internals/monitoring_rest_api.html">Monitoring REST API</a></li>
                
                <li class=""><a href="/internals/job_scheduling.html">Jobs and Scheduling</a></li>
                
                <li class=""><a href="/internals/add_operator.html">How-To: Add an Operator</a></li>
                
                <li class=""><a href="/internals/back_pressure_monitoring.html">Back Pressure Monitoring</a></li>
                
              </ul>
            </li>
          </ul>
          <form class="navbar-form navbar-right hidden-sm hidden-md" role="search" action="/search-results.html">
            <div class="form-group">
              <input type="text" class="form-control" size="16px" name="q" placeholder="Search all pages">
            </div>
            <button type="submit" class="btn btn-default">Search</button>
          </form>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container -->
    </nav>


    

    <!-- Main content. -->
    <div class="container">
      
      
<div class="row">

  
  <div class="col-md-8 col-md-offset-2 text">
    <!-- Artifact name change warning. Remove for the 1.0 release. -->
    <div class="panel panel-default">
      <div class="panel-body"><strong>Important</strong>: Maven artifacts which depend on Scala are now suffixed with the Scala major version, e.g. "2.10" or "2.11". Please consult the <a href="https://cwiki.apache.org/confluence/display/FLINK/Maven+artifact+names+suffixed+with+Scala+version">migration guide on the project Wiki</a>.</div>
    </div>

    <h1>Command-Line Interface</h1>


<p>Flink provides a command-line interface to run programs that are packaged
as JAR files, and control their execution.  The command line interface is part
of any Flink setup, available in local single node setups and in
distributed setups. It is located under <code>&lt;flink-home&gt;/bin/flink</code>
and connects by default to the running Flink master (JobManager) that was
started from the same installation directory.</p>

<p>A prerequisite to using the command line interface is that the Flink
master (JobManager) has been started (via 
<code>&lt;flink-home&gt;/bin/start-local.sh</code> or 
<code>&lt;flink-home&gt;/bin/start-cluster.sh</code>) or that a YARN environment is 
available.</p>

<p>The command line can be used to</p>

<ul id="markdown-toc">
  <li><a href="#examples" id="markdown-toc-examples">Examples</a>    <ul>
      <li><a href="#savepoints" id="markdown-toc-savepoints">Savepoints</a></li>
    </ul>
  </li>
  <li><a href="#usage" id="markdown-toc-usage">Usage</a></li>
</ul>

<h2 id="examples">Examples</h2>

<ul>
  <li>
    <p>Run example program with no arguments.</p>

    <div class="highlight"><pre><code>./bin/flink run ./examples/batch/WordCount.jar
</code></pre></div>
  </li>
  <li>
    <p>Run example program with arguments for input and result files</p>

    <div class="highlight"><pre><code>./bin/flink run ./examples/batch/WordCount.jar \
                       file:///home/user/hamlet.txt file:///home/user/wordcount_out
</code></pre></div>
  </li>
  <li>
    <p>Run example program with parallelism 16 and arguments for input and result files</p>

    <div class="highlight"><pre><code>./bin/flink run -p 16 ./examples/batch/WordCount.jar \
                        file:///home/user/hamlet.txt file:///home/user/wordcount_out
</code></pre></div>
  </li>
  <li>
    <p>Run example program with flink log output disabled</p>

    <div class="highlight"><pre><code>    ./bin/flink run -q ./examples/batch/WordCount.jar
</code></pre></div>
  </li>
  <li>
    <p>Run example program in detached mode</p>

    <div class="highlight"><pre><code>    ./bin/flink run -d ./examples/batch/WordCount.jar
</code></pre></div>
  </li>
  <li>
    <p>Run example program on a specific JobManager:</p>

    <div class="highlight"><pre><code>./bin/flink run -m myJMHost:6123 \
                       ./examples/batch/WordCount.jar \
                       file:///home/user/hamlet.txt file:///home/user/wordcount_out
</code></pre></div>
  </li>
  <li>
    <p>Run example program with a specific class as an entry point:</p>

    <div class="highlight"><pre><code>./bin/flink run -c org.apache.flink.examples.java.wordcount.WordCount \
                       ./examples/batch/WordCount.jar \
                       file:///home/user/hamlet.txt file:///home/user/wordcount_out
</code></pre></div>
  </li>
  <li>
    <p>Run example program using a <a href="/setup/yarn_setup.html#run-a-single-flink-job-on-hadoop-yarn">per-job YARN cluster</a> with 2 TaskManagers:</p>

    <div class="highlight"><pre><code>./bin/flink run -m yarn-cluster -yn 2 \
                       ./examples/batch/WordCount.jar \
                       hdfs:///user/hamlet.txt hdfs:///user/wordcount_out
</code></pre></div>
  </li>
  <li>
    <p>Display the optimized execution plan for the WordCount example program as JSON:</p>

    <div class="highlight"><pre><code>./bin/flink info ./examples/batch/WordCount.jar \
                        file:///home/user/hamlet.txt file:///home/user/wordcount_out
</code></pre></div>
  </li>
  <li>
    <p>List scheduled and running jobs (including their JobIDs):</p>

    <div class="highlight"><pre><code>./bin/flink list
</code></pre></div>
  </li>
  <li>
    <p>List scheduled jobs (including their JobIDs):</p>

    <div class="highlight"><pre><code>./bin/flink list -s
</code></pre></div>
  </li>
  <li>
    <p>List running jobs (including their JobIDs):</p>

    <div class="highlight"><pre><code>./bin/flink list -r
</code></pre></div>
  </li>
  <li>
    <p>Cancel a job:</p>

    <div class="highlight"><pre><code>./bin/flink cancel &lt;jobID&gt;
</code></pre></div>
  </li>
  <li>
    <p>Stop a job (streaming jobs only):</p>

    <div class="highlight"><pre><code>./bin/flink stop &lt;jobID&gt;
</code></pre></div>
  </li>
</ul>

<p>The difference between cancelling and stopping a (streaming) job is the following:</p>

<p>On a cancel call, the operators in a job immediately receive a <code>cancel()</code> method call to cancel them as 
soon as possible.
If operators are not not stopping after the cancel call, Flink will start interrupting the thread periodically
until it stops.</p>

<p>A “stop” call is a more graceful way of stopping a running streaming job. Stop is only available for jobs
which use sources that implement the <code>StoppableFunction</code> interface. When the user requests to stop a job,
all sources will receive a <code>stop()</code> method call. The job will keep running until all sources properly shut down.
This allows the job to finish processing all inflight data.</p>

<h3 id="savepoints">Savepoints</h3>

<p><a href="/apis/streaming/savepoints.html">Savepoints</a> are controlled via the command line client:</p>

<h4 id="trigger-a-savepoint">Trigger a savepoint</h4>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">./bin/flink savepoint &lt;jobID&gt;</code></pre></div>

<p>Returns the path of the created savepoint. You need this path to restore and dispose savepoints.</p>

<h4 id="restore-a-savepoint"><strong>Restore a savepoint</strong>:</h4>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">./bin/flink run -s &lt;savepointPath&gt; ...</code></pre></div>

<p>The run command has a savepoint flag to submit a job, which restores its state from a savepoint. The savepoint path is returned by the savepoint trigger command.</p>

<h4 id="dispose-a-savepoint"><strong>Dispose a savepoint</strong>:</h4>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">./bin/flink savepoint -d &lt;savepointPath&gt;</code></pre></div>

<p>Disposes the savepoint at the given path. The savepoint path is returned by the savepoint trigger command.</p>

<h2 id="usage">Usage</h2>

<p>The command line syntax is as follows:</p>

<div class="highlight"><pre><code>./flink &lt;ACTION&gt; [OPTIONS] [ARGUMENTS]

The following actions are available:

Action "run" compiles and runs a program.

  Syntax: run [OPTIONS] &lt;jar-file&gt; &lt;arguments&gt;
  "run" action options:
     -c,--class &lt;classname&gt;               Class with the program entry point
                                          ("main" method or "getPlan()" method.
                                          Only needed if the JAR file does not
                                          specify the class in its manifest.
     -C,--classpath &lt;url&gt;                 Adds a URL to each user code
                                          classloader  on all nodes in the
                                          cluster. The paths must specify a
                                          protocol (e.g. file://) and be
                                          accessible on all nodes (e.g. by means
                                          of a NFS share). You can use this
                                          option multiple times for specifying
                                          more than one URL. The protocol must
                                          be supported by the {@link
                                          java.net.URLClassLoader}.
     -d,--detached                        If present, runs the job in detached
                                          mode
     -m,--jobmanager &lt;host:port&gt;          Address of the JobManager (master) to
                                          which to connect. Specify
                                          'yarn-cluster' as the JobManager to
                                          deploy a YARN cluster for the job. Use
                                          this flag to connect to a different
                                          JobManager than the one specified in
                                          the configuration.
     -p,--parallelism &lt;parallelism&gt;       The parallelism with which to run the
                                          program. Optional flag to override the
                                          default value specified in the
                                          configuration.
     -q,--sysoutLogging                   If present, supress logging output to
                                          standard out.
     -s,--fromSavepoint &lt;savepointPath&gt;   Path to a savepoint to reset the job
                                          back to (for example
                                          file:///flink/savepoint-1537).
  Additional arguments if -m yarn-cluster is set:
     -yD &lt;arg&gt;                            Dynamic properties
     -yd,--yarndetached                   Start detached
     -yj,--yarnjar &lt;arg&gt;                  Path to Flink jar file
     -yjm,--yarnjobManagerMemory &lt;arg&gt;    Memory for JobManager Container [in
                                          MB]
     -yn,--yarncontainer &lt;arg&gt;            Number of YARN container to allocate
                                          (=Number of Task Managers)
     -ynm,--yarnname &lt;arg&gt;                Set a custom name for the application
                                          on YARN
     -yq,--yarnquery                      Display available YARN resources
                                          (memory, cores)
     -yqu,--yarnqueue &lt;arg&gt;               Specify YARN queue.
     -ys,--yarnslots &lt;arg&gt;                Number of slots per TaskManager
     -yst,--yarnstreaming                 Start Flink in streaming mode
     -yt,--yarnship &lt;arg&gt;                 Ship files in the specified directory
                                          (t for transfer)
     -ytm,--yarntaskManagerMemory &lt;arg&gt;   Memory per TaskManager Container [in
                                          MB]


Action "info" shows the optimized execution plan of the program (JSON).

  Syntax: info [OPTIONS] &lt;jar-file&gt; &lt;arguments&gt;
  "info" action options:
     -c,--class &lt;classname&gt;           Class with the program entry point ("main"
                                      method or "getPlan()" method. Only needed
                                      if the JAR file does not specify the class
                                      in its manifest.
     -m,--jobmanager &lt;host:port&gt;      Address of the JobManager (master) to
                                      which to connect. Specify 'yarn-cluster'
                                      as the JobManager to deploy a YARN cluster
                                      for the job. Use this flag to connect to a
                                      different JobManager than the one
                                      specified in the configuration.
     -p,--parallelism &lt;parallelism&gt;   The parallelism with which to run the
                                      program. Optional flag to override the
                                      default value specified in the
                                      configuration.


Action "list" lists running and scheduled programs.

  Syntax: list [OPTIONS]
  "list" action options:
     -m,--jobmanager &lt;host:port&gt;   Address of the JobManager (master) to which
                                   to connect. Specify 'yarn-cluster' as the
                                   JobManager to deploy a YARN cluster for the
                                   job. Use this flag to connect to a different
                                   JobManager than the one specified in the
                                   configuration.
     -r,--running                  Show only running programs and their JobIDs
     -s,--scheduled                Show only scheduled programs and their JobIDs


Action "cancel" cancels a running program.

  Syntax: cancel [OPTIONS] &lt;Job ID&gt;
  "cancel" action options:
     -m,--jobmanager &lt;host:port&gt;   Address of the JobManager (master) to which
                                   to connect. Specify 'yarn-cluster' as the
                                   JobManager to deploy a YARN cluster for the
                                   job. Use this flag to connect to a different
                                   JobManager than the one specified in the
                                   configuration.


Action "stop" stops a running program (streaming jobs only). There are no strong consistency
guarantees for a stop request.

  Syntax: stop [OPTIONS] &lt;Job ID&gt;
  "stop" action options:
     -m,--jobmanager &lt;host:port&gt;   Address of the JobManager (master) to which
                                   to connect. Use this flag to connect to a
                                   different JobManager than the one specified
                                   in the configuration.


Action "savepoint" triggers savepoints for a running job or disposes existing ones.

  Syntax: savepoint [OPTIONS] &lt;Job ID&gt;
  "savepoint" action options:
     -d,--dispose &lt;savepointPath&gt;   Disposes an existing savepoint.
     -m,--jobmanager &lt;host:port&gt;    Address of the JobManager (master) to which
                                    to connect. Specify 'yarn-cluster' as the
                                    JobManager to deploy a YARN cluster for the
                                    job. Use this flag to connect to a different
                                    JobManager than the one specified in the
                                    configuration.
</code></pre></div>

  </div>

  
</div>

    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="/page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>

<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.12 Documentation: Docker 设置</title>
    <link rel="shortcut icon" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/favicon.ico" type="image/x-icon">
    <link rel="canonical" href="//ci.apache.org/projects/flink/flink-docs-stable/zh/deployment/resource-providers/standalone/docker.html">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/flink.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/syntax.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/codetabs.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/font-awesome/css/font-awesome.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    

    <!-- Main content. -->
    <div class="container">
      
      <div class="row">
        <div class="col-lg-3" id="sidenavcol">
          <div class="sidenav-logo">
  <p><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/"><img class="bottom" alt="Apache Flink" src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/img/navbar-brand-logo.jpg"></a> v1.12</p>
</div>
<ul id="sidenav">
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/"><i class="fa fa-home title" aria-hidden="true"></i> Home</a></li><hr class="section-break"></hr>
<li><a href="#collapse-2" data-toggle="collapse"><i class="fa fa-rocket title appetizer" aria-hidden="true"></i> Try Flink<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-2"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/local_installation.html">本地模式安装</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/datastream_api.html">基于 DataStream API 实现欺诈检测</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/table_api.html">基于 Table API 实现实时报表</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/flink-operations-playground.html">Flink 操作场景</a></li>
</ul></div></li>
<li><a href="#collapse-8" data-toggle="collapse"><i class="fa fa-hand-paper-o title appetizer" aria-hidden="true"></i> 实践练习<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-8"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/datastream_api.html">DataStream API 简介</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/etl.html">数据管道 & ETL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/streaming_analytics.html">流式分析</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/event_driven.html">事件驱动应用</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/fault_tolerance.html">容错处理</a></li>
</ul></div></li>
<li><a href="#collapse-15" data-toggle="collapse"><i class="fa fa-map-o title appetizer" aria-hidden="true"></i> 概念透析<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-15"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/index.html">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/stateful-stream-processing.html">有状态流处理</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/timely-stream-processing.html">及时流处理</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/flink-architecture.html">Flink 架构</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/glossary.html">词汇表</a></li>
</ul></div></li><hr class="section-break"></hr>
<li><a href="#collapse-21" data-toggle="collapse"><i class="fa fa-code title maindish" aria-hidden="true"></i> 应用开发<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-21"><ul>
<li><a href="#collapse-22" data-toggle="collapse">DataStream API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-22"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/datastream_api.html">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/datastream_execution_mode.html">Execution Mode (Batch/Streaming)</a></li>
<li><a href="#collapse-24" data-toggle="collapse">事件时间<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-24"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/event_time.html">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/event_timestamps_watermarks.html">生成 Watermark</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/event_timestamp_extractors.html">内置 Watermark 生成器</a></li>
</ul></div></li>
<li><a href="#collapse-28" data-toggle="collapse">状态与容错<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-28"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/state.html">Working with State</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/broadcast_state.html">Broadcast State 模式</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/checkpointing.html">Checkpointing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/queryable_state.html">Queryable State</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/state_backends.html">State Backends</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/schema_evolution.html">状态数据结构升级</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/custom_serialization.html">自定义状态序列化</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/user_defined_functions.html">用户自定义 Functions</a></li>
<li><a href="#collapse-38" data-toggle="collapse">算子<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-38"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/windows.html">窗口</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/joining.html">Joining</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/process_function.html">Process Function</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/asyncio.html">异步 I/O</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/sources.html">Data Sources</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/side_output.html">旁路输出</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/application_parameters.html">Handling Application Parameters</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/testing.html">测试</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/experimental.html">实验功能</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/scala_api_extensions.html">Scala API Extensions</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/java_lambdas.html">Java Lambda 表达式</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/project-configuration.html">Project Configuration</a></li>
</ul></div></li>
<li><a href="#collapse-53" data-toggle="collapse">DataSet API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-53"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/dataset_transformations.html">Transformations</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/iterations.html">迭代</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/zip_elements_guide.html">Zipping Elements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/hadoop_compatibility.html">Hadoop 兼容</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/local_execution.html">本地执行</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/cluster_execution.html">集群执行</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/examples.html">Batch 示例</a></li>
</ul></div></li>
<li><a href="#collapse-62" data-toggle="collapse">Table API & SQL<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-62"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/common.html">概念与通用 API</a></li>
<li><a href="#collapse-64" data-toggle="collapse">流式概念<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-64"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/dynamic_tables.html">动态表 (Dynamic Table)</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/time_attributes.html">时间属性</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/joins.html">流上的 Join</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/temporal_tables.html">时态表（Temporal Tables）</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/match_recognize.html">模式检测</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/query_configuration.html">Query Configuration</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/types.html">数据类型</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/tableApi.html">Table API</a></li>
<li><a href="#collapse-74" data-toggle="collapse">SQL<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-74"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/queries.html">查询语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/create.html">CREATE 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/drop.html">DROP 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/alter.html">ALTER 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/insert.html">INSERT 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/hints.html">SQL Hints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/describe.html">DESCRIBE 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/explain.html">EXPLAIN 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/use.html">USE 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/show.html">SHOW 语句</a></li>
</ul></div></li>
<li><a href="#collapse-86" data-toggle="collapse">函数<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-86"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/functions/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/functions/systemFunctions.html">系统（内置）函数</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/functions/udfs.html">自定义函数</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/modules.html">模块</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/catalogs.html">Catalogs</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sqlClient.html">SQL 客户端</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/config.html">配置</a></li>
<li><a href="#collapse-94" data-toggle="collapse">Performance Tuning<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-94"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/tuning/streaming_aggregation_optimization.html">流式聚合</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sourceSinks.html">User-defined Sources & Sinks</a></li>
</ul></div></li>
<li><a href="#collapse-99" data-toggle="collapse">Python API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-99"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/installation.html">环境安装</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table_api_tutorial.html">Table API 教程</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/datastream_tutorial.html">DataStream API 教程</a></li>
<li><a href="#collapse-103" data-toggle="collapse">Table API用户指南<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-103"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/intro_to_table_api.html">Python Table API 简介</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/table_environment.html">TableEnvironment</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/operations.html">Operations</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/python_types.html">数据类型</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/built_in_functions.html">系统（内置）函数</a></li>
<li><a href="#collapse-109" data-toggle="collapse">自定义函数<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-109"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/udfs/python_udfs.html">普通自定义函数（UDF）</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/udfs/vectorized_python_udfs.html">向量化自定义函数</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/conversion_of_pandas.html">PyFlink Table 和 Pandas DataFrame 互转</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/dependency_management.html">依赖管理</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/sql.html">SQL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/catalogs.html">Catalogs</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/metrics.html">指标</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/python_table_api_connectors.html">连接器</a></li>
</ul></div></li>
<li><a href="#collapse-120" data-toggle="collapse">DataStream API用户指南<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-120"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/datastream-api-users-guide/data_types.html">数据类型</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/datastream-api-users-guide/operators.html">算子</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/datastream-api-users-guide/dependency_management.html">依赖管理</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/python_config.html">配置</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/environment_variables.html">环境变量</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/faq.html">常见问题</a></li>
</ul></div></li>
<li><a href="#collapse-129" data-toggle="collapse">数据类型以及序列化<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-129"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/types_serialization.html">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/custom_serializers.html">自定义序列化器</a></li>
</ul></div></li>
<li><a href="#collapse-132" data-toggle="collapse">管理执行<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-132"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/execution_configuration.html">执行配置</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/packaging.html">程序打包</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/parallel.html">并行执行</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/execution_plans.html">执行计划</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/task_failure_recovery.html">Task 故障恢复</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/migration.html">API 迁移指南</a></li>
</ul></div></li>
<li><a href="#collapse-141" data-toggle="collapse"><i class="fa fa-book title maindish" aria-hidden="true"></i> Libraries<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-141"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/cep.html">事件处理 (CEP)</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/state_processor_api.html">State Processor API</a></li>
<li><a href="#collapse-144" data-toggle="collapse">图计算: Gelly<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-144"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/graph_api.html">Graph API</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/iterative_graph_processing.html">Iterative Graph Processing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/library_methods.html">Library Methods</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/graph_algorithms.html">Graph Algorithms</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/graph_generators.html">Graph Generators</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/bipartite_graph.html">Bipartite Graph</a></li>
</ul></div></li>
</ul></div></li>
<li><a href="#collapse-153" data-toggle="collapse"><i class="fa fa-random title maindish" aria-hidden="true"></i> Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-153"><ul>
<li><a href="#collapse-154" data-toggle="collapse">DataStream Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-154"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/guarantees.html">容错保证</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/kafka.html">Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/cassandra.html">Cassandra</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/kinesis.html">Kinesis</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/elasticsearch.html">Elasticsearch</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/file_sink.html">File Sink</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/streamfile_sink.html">Streaming File Sink</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/rabbitmq.html">RabbitMQ</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/nifi.html">NiFi</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/pubsub.html">Google Cloud PubSub</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/twitter.html">Twitter</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/jdbc.html">JDBC</a></li>
</ul></div></li>
<li><a href="#collapse-168" data-toggle="collapse">Table & SQL Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-168"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/">概览</a></li>
<li><a href="#collapse-169" data-toggle="collapse">Formats<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-169"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/csv.html">CSV</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/json.html">JSON</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/avro-confluent.html">Confluent Avro</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/avro.html">Avro</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/debezium.html">Debezium</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/canal.html">Canal</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/maxwell.html">Maxwell</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/parquet.html">Parquet</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/orc.html">Orc</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/raw.html">Raw</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/kafka.html">Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/upsert-kafka.html">Upsert Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/kinesis.html">Kinesis</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/jdbc.html">JDBC</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/elasticsearch.html">Elasticsearch</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/filesystem.html">FileSystem</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hbase.html">HBase</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/datagen.html">DataGen</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/print.html">Print</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/blackhole.html">BlackHole</a></li>
<li><a href="#collapse-191" data-toggle="collapse">Hive<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-191"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/hive_catalog.html">Hive Catalog</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/hive_dialect.html">Hive 方言</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/hive_read_write.html">Hive Read & Write</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/hive_functions.html">Hive 函数</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/downloads.html">下载</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/connectors.html">DataSet Connectors</a></li>
</ul></div></li>
<li><a href="#collapse-201" data-toggle="collapse"class="active"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment</a><div class="collapse in" id="collapse-201"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/">概览</a></li>
<li><a href="#collapse-202" data-toggle="collapse"class="active">Resource Providers</a><div class="collapse in" id="collapse-202"><ul>
<li><a href="#collapse-203" data-toggle="collapse"class="active">Standalone</a><div class="collapse in" id="collapse-203"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/local.html">本地集群</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/docker.html" class="active">Docker</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/kubernetes.html">Kubernetes</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/native_kubernetes.html">Native Kubernetes</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/yarn.html">YARN</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/mesos.html">Mesos</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/config.html">配置参数</a></li>
<li><a href="#collapse-213" data-toggle="collapse">内存配置<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-213"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_setup.html">配置 Flink 进程的内存</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_setup_tm.html">配置 TaskManager 内存</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_setup_jobmanager.html">配置 JobManager 内存</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_tuning.html">调优指南</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_trouble.html">常见问题</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_migration.html">升级指南</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/cli.html">Command-Line Interface</a></li>
<li><a href="#collapse-222" data-toggle="collapse">文件系统<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-222"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/common.html">通用配置</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/s3.html">Amazon S3</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/oss.html">阿里云 OSS</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/azure.html">Azure Blob 存储</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/plugins.html">Plugins</a></li>
</ul></div></li>
<li><a href="#collapse-229" data-toggle="collapse">High Availability (HA)<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-229"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/ha/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/ha/zookeeper_ha.html">ZooKeeper HA Services</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/ha/kubernetes_ha.html">Kubernetes HA Services</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/metric_reporters.html">Metric Reporters</a></li>
<li><a href="#collapse-234" data-toggle="collapse">Security<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-234"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/security/security-ssl.html">SSL 设置</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/security/security-kerberos.html">Kerberos</a></li>
</ul></div></li>
<li><a href="#collapse-238" data-toggle="collapse">REPLs<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-238"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/repls/python_shell.html">Python REPL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/repls/scala_shell.html">Scala REPL</a></li>
</ul></div></li>
<li><a href="#collapse-242" data-toggle="collapse">Advanced<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-242"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/advanced/external_resources.html">扩展资源</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/advanced/historyserver.html">History Server</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/advanced/logging.html">日志</a></li>
</ul></div></li>
</ul></div></li>
<li><a href="#collapse-248" data-toggle="collapse"><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Operations<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-248"><ul>
<li><a href="#collapse-249" data-toggle="collapse">状态与容错<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-249"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/state/checkpoints.html">Checkpoints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/state/savepoints.html">Savepoints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/state/state_backends.html">State Backends</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/state/large_state_tuning.html">大状态与 Checkpoint 调优</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/metrics.html">指标</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/rest_api.html">REST API</a></li>
<li><a href="#collapse-257" data-toggle="collapse">Debugging<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-257"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/debugging/debugging_event_time.html">调试窗口与事件时间</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/debugging/debugging_classloading.html">调试类加载</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/debugging/application_profiling.html">应用程序分析</a></li>
</ul></div></li>
<li><a href="#collapse-262" data-toggle="collapse">Monitoring<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-262"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/monitoring/checkpoint_monitoring.html">监控 Checkpoint</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/monitoring/back_pressure.html">监控反压</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/upgrading.html">升级应用程序和 Flink 版本</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/production_ready.html">生产就绪情况核对清单</a></li>
</ul></div></li><hr class="section-break"></hr>
<li><a href="#collapse-269" data-toggle="collapse"><i class="fa fa-cogs title dessert" aria-hidden="true"></i> Flink 开发<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-269"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/flinkDev/ide_setup.html">导入 Flink 到 IDE 中</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/flinkDev/building.html">从源码构建 Flink</a></li>
</ul></div></li>
<li><a href="#collapse-273" data-toggle="collapse"><i class="fa fa-book title dessert" aria-hidden="true"></i> 内幕<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-273"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/internals/job_scheduling.html">作业调度</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/internals/task_lifecycle.html">Task 生命周期</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/internals/filesystems.html">文件系统</a></li>
</ul></div></li>
  <li class="divider"></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/java"><i class="fa fa-external-link title" aria-hidden="true"></i> Javadocs</a></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/scala/index.html#org.apache.flink.api.scala.package"><i class="fa fa-external-link title" aria-hidden="true"></i> Scaladocs</a></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/python"><i class="fa fa-external-link title" aria-hidden="true"></i> Pythondocs</a></li>
  <li><a href="http://flink.apache.org"><i class="fa fa-external-link title" aria-hidden="true"></i> Project Page</a></li>
</ul>

<div class="sidenav-search-box">
  <form class="navbar-form" role="search" action="//ci.apache.org/projects/flink/flink-docs-release-1.12/search-results.html">
    <div class="form-group">
      <input type="text" class="form-control" size="16px" name="q" placeholder="Search">
    </div>
    <button type="submit" class="btn btn-default">Go</button>
  </form>
</div>

<div class="sidenav-versions">
  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">选择文档版本<span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.11">v1.11</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.10">v1.10</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.9">v1.9</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.8">v1.8</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.7">v1.7</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.6">v1.6</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.5">v1.5</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.4">v1.4</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.3">v1.3</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.2">v1.2</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.1">v1.1</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.0">v1.0</a></li>
    </ul>
  </div>
</div>

<div class="sidenav-languages"><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/resource-providers/standalone/docker.html">
      <button type="submit" class="btn btn-default">English</button>
    </a>
</div>

        </div>
        <div class="col-lg-9 content" id="contentcol">

          

<ol class="breadcrumb">
  
    <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment</a></li>
  
    <li>Resource Providers</li>
  
    <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/">Standalone</a></li>
  
    <li class="active">Docker</li>
</ol>

<h1>Docker 设置</h1>




<p><a href="https://www.docker.com">Docker</a> is a popular container runtime.
There are Docker images for Apache Flink available <a href="https://hub.docker.com/_/flink">on Docker Hub</a>.
You can use the docker images to deploy a <em>Session</em> or <em>Job cluster</em> in a containerized environment, e.g.,
<a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/kubernetes.html">standalone Kubernetes</a> or <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/native_kubernetes.html">native Kubernetes</a>.</p>

<ul id="markdown-toc">
  <li><a href="#docker-hub-flink-images" id="markdown-toc-docker-hub-flink-images">Docker Hub Flink images</a>    <ul>
      <li><a href="#image-tags" id="markdown-toc-image-tags">Image tags</a></li>
    </ul>
  </li>
  <li><a href="#how-to-run-a-flink-image" id="markdown-toc-how-to-run-a-flink-image">How to run a Flink image</a>    <ul>
      <li><a href="#start-a-session-cluster" id="markdown-toc-start-a-session-cluster">Start a Session Cluster</a></li>
      <li><a href="#start-a-job-cluster" id="markdown-toc-start-a-job-cluster">Start a Job Cluster</a></li>
    </ul>
  </li>
  <li><a href="#customize-flink-image" id="markdown-toc-customize-flink-image">Customize Flink image</a>    <ul>
      <li><a href="#configure-options" id="markdown-toc-configure-options">Configure options</a></li>
      <li><a href="#provide-custom-configuration" id="markdown-toc-provide-custom-configuration">Provide custom configuration</a></li>
      <li><a href="#using-plugins" id="markdown-toc-using-plugins">Using plugins</a></li>
      <li><a href="#switch-memory-allocator" id="markdown-toc-switch-memory-allocator">Switch memory allocator</a></li>
      <li><a href="#advanced-customization" id="markdown-toc-advanced-customization">Advanced customization</a></li>
    </ul>
  </li>
  <li><a href="#flink-with-docker-compose" id="markdown-toc-flink-with-docker-compose">Flink with Docker Compose</a>    <ul>
      <li><a href="#usage" id="markdown-toc-usage">Usage</a></li>
      <li><a href="#session-cluster-with-docker-compose" id="markdown-toc-session-cluster-with-docker-compose">Session Cluster with Docker Compose</a></li>
      <li><a href="#job-cluster-with-docker-compose" id="markdown-toc-job-cluster-with-docker-compose">Job Cluster with Docker Compose</a></li>
      <li><a href="#enabling-python" id="markdown-toc-enabling-python">Enabling Python</a></li>
    </ul>
  </li>
  <li><a href="#flink-with-docker-swarm" id="markdown-toc-flink-with-docker-swarm">Flink with Docker Swarm</a>    <ul>
      <li><a href="#session-cluster-with-docker-swarm" id="markdown-toc-session-cluster-with-docker-swarm">Session Cluster with Docker Swarm</a></li>
      <li><a href="#job-cluster-with-docker-swarm" id="markdown-toc-job-cluster-with-docker-swarm">Job Cluster with Docker Swarm</a></li>
    </ul>
  </li>
</ul>

<h2 id="docker-hub-flink-images">Docker Hub Flink images</h2>

<p>The <a href="https://hub.docker.com/_/flink/">Flink Docker repository</a> is hosted on
Docker Hub and serves images of Flink version 1.2.1 and later.
The source for these images can be found in the <a href="https://github.com/apache/flink-docker">Apache flink-docker</a> repository.</p>

<h3 id="image-tags">Image tags</h3>

<p>Images for each supported combination of Flink and Scala versions are available, and
<a href="https://hub.docker.com/_/flink?tab=tags">tag aliases</a> are provided for convenience.</p>

<p>For example, you can use the following aliases:</p>

<ul>
  <li><code class="highlighter-rouge">flink:latest</code> → <code class="highlighter-rouge">flink:&lt;latest-flink&gt;-scala_&lt;latest-scala&gt;</code></li>
  <li><code class="highlighter-rouge">flink:1.11</code> → <code class="highlighter-rouge">flink:1.11.&lt;latest-flink-1.11&gt;-scala_2.11</code></li>
</ul>

<p><span class="label label-info">Note</span>It is recommended to always use an explicit version tag of the docker image that specifies both the needed Flink and Scala
versions (for example <code class="highlighter-rouge">flink:1.11-scala_2.12</code>).
This will avoid some class conflicts that can occur if the Flink and/or Scala versions used in the application are different
from the versions provided by the docker image.</p>

<p><span class="label label-info">Note</span> Prior to Flink 1.5 version, Hadoop dependencies were always bundled with Flink.
You can see that certain tags include the version of Hadoop, e.g. (e.g. <code class="highlighter-rouge">-hadoop28</code>).
Beginning with Flink 1.5, image tags that omit the Hadoop version correspond to Hadoop-free releases of Flink
that do not include a bundled Hadoop distribution.</p>

<h2 id="how-to-run-a-flink-image">How to run a Flink image</h2>

<p>The Flink image contains a regular Flink distribution with its default configuration and a standard entry point script.
You can run its entry point in the following modes:</p>
<ul>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/glossary.html#flink-jobmanager">JobManager</a> for <a href="#start-a-session-cluster">a Session cluster</a></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/glossary.html#flink-jobmanager">JobManager</a> for <a href="#start-a-job-cluster">a Job cluster</a></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/glossary.html#flink-taskmanager">TaskManager</a> for any cluster</li>
</ul>

<p>This allows you to deploy a standalone cluster (Session or Job) in any containerised environment, for example:</p>
<ul>
  <li>manually in a local Docker setup,</li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/kubernetes.html">in a Kubernetes cluster</a>,</li>
  <li><a href="#flink-with-docker-compose">with Docker Compose</a>,</li>
  <li><a href="#flink-with-docker-swarm">with Docker swarm</a>.</li>
</ul>

<p><span class="label label-info">Note</span> <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/native_kubernetes.html">The native Kubernetes</a> also runs the same image by default
and deploys <em>TaskManagers</em> on demand so that you do not have to do it manually.</p>

<p>The next chapters describe how to start a single Flink Docker container for various purposes.</p>

<p>Once you’ve started Flink on Docker, you can access the Flink Webfrontend on <a href="http://localhost:8081/#/overview">localhost:8081</a> or submit jobs like this <code class="highlighter-rouge">./bin/flink run ./examples/streaming/TopSpeedWindowing.jar</code>.</p>

<p>We recommend using <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/docker.html#session-cluster-with-docker-compose">Docker Compose</a> or <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/docker.html#session-cluster-with-docker-swarm">Docker Swarm</a> for deploying Flink as a Session Cluster to ease system configuration.</p>

<h3 id="start-a-session-cluster">Start a Session Cluster</h3>

<p>A <em>Flink Session cluster</em> can be used to run multiple jobs. Each job needs to be submitted to the cluster after it has been deployed.
To deploy a <em>Flink Session cluster</em> with Docker, you need to start a <em>JobManager</em> container. To enable communication between the containers, we first set a required Flink configuration property and create a network:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"jobmanager.rpc.address: jobmanager"</span>
docker network create flink-network
</code></pre></div></div>

<p>Then we launch the JobManager:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="se">\</span>
    <span class="nt">--rm</span> <span class="se">\</span>
    <span class="nt">--name</span><span class="o">=</span>jobmanager <span class="se">\</span>
    <span class="nt">--network</span> flink-network <span class="se">\</span>
    <span class="nt">-p</span> 8081:8081 <span class="se">\</span>
    <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    flink:1.12.0-scala_2.11 jobmanager
</code></pre></div></div>

<p>and one or more <em>TaskManager</em> containers:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="se">\</span>
    <span class="nt">--rm</span> <span class="se">\</span>
    <span class="nt">--name</span><span class="o">=</span>taskmanager <span class="se">\</span>
    <span class="nt">--network</span> flink-network <span class="se">\</span>
    <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    flink:1.12.0-scala_2.11 taskmanager
</code></pre></div></div>

<h3 id="start-a-job-cluster">Start a Job Cluster</h3>

<p>A <em>Flink Job cluster</em> is a dedicated cluster which runs a single job.
In this case, you deploy the cluster with the job as one step, thus, there is no extra job submission needed.</p>

<p>The <em>job artifacts</em> are included into the class path of Flink’s JVM process within the container and consist of:</p>
<ul>
  <li>your job jar, which you would normally submit to a <em>Session cluster</em> and</li>
  <li>all other necessary dependencies or resources, not included into Flink.</li>
</ul>

<p>To deploy a cluster for a single job with Docker, you need to</p>
<ul>
  <li>make <em>job artifacts</em> available locally <em>in all containers</em> under <code class="highlighter-rouge">/opt/flink/usrlib</code>,</li>
  <li>start a <em>JobManager</em> container in the <em>Job Cluster</em> mode</li>
  <li>start the required number of <em>TaskManager</em> containers.</li>
</ul>

<p>To make the <strong>job artifacts available</strong> locally in the container, you can</p>

<ul>
  <li>
    <p><strong>either mount a volume</strong> (or multiple volumes) with the artifacts to <code class="highlighter-rouge">/opt/flink/usrlib</code> when you start
the <em>JobManager</em> and <em>TaskManagers</em>:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"jobmanager.rpc.address: jobmanager"</span>
  docker network create flink-network

  docker run <span class="se">\</span>
      <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,src<span class="o">=</span>/host/path/to/job/artifacts1,target<span class="o">=</span>/opt/flink/usrlib/artifacts1 <span class="se">\</span>
      <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,src<span class="o">=</span>/host/path/to/job/artifacts2,target<span class="o">=</span>/opt/flink/usrlib/artifacts2 <span class="se">\</span>
      <span class="nt">--rm</span> <span class="se">\</span>
      <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
      <span class="nt">--name</span><span class="o">=</span>jobmanager <span class="se">\</span>
      <span class="nt">--network</span> flink-network <span class="se">\</span>
      flink:1.12.0-scala_2.11 standalone-job <span class="se">\</span>
      <span class="nt">--job-classname</span> com.job.ClassName <span class="se">\</span>
      <span class="o">[</span><span class="nt">--job-id</span> &lt;job <span class="nb">id</span><span class="o">&gt;]</span> <span class="se">\</span>
      <span class="o">[</span><span class="nt">--fromSavepoint</span> /path/to/savepoint <span class="o">[</span><span class="nt">--allowNonRestoredState</span><span class="o">]]</span> <span class="se">\</span>
      <span class="o">[</span>job arguments]

  docker run <span class="se">\</span>
      <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,src<span class="o">=</span>/host/path/to/job/artifacts1,target<span class="o">=</span>/opt/flink/usrlib/artifacts1 <span class="se">\</span>
      <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,src<span class="o">=</span>/host/path/to/job/artifacts2,target<span class="o">=</span>/opt/flink/usrlib/artifacts2 <span class="se">\</span>
      <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
      flink:1.12.0-scala_2.11 taskmanager
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>or extend the Flink image</strong> by writing a custom <code class="highlighter-rouge">Dockerfile</code>, build it and use it for starting the <em>JobManager</em> and <em>TaskManagers</em>:</p>

    <p><em>Dockerfile</em>:</p>

    <div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  FROM flink
  ADD /host/path/to/job/artifacts/1 /opt/flink/usrlib/artifacts/1
  ADD /host/path/to/job/artifacts/2 /opt/flink/usrlib/artifacts/2
</code></pre></div>    </div>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker build <span class="nt">-t</span> flink_with_job_artifacts <span class="nb">.</span>
  docker run <span class="se">\</span>
      flink_with_job_artifacts standalone-job <span class="se">\</span>
      <span class="nt">--job-classname</span> com.job.ClassName <span class="se">\</span>
      <span class="o">[</span><span class="nt">--job-id</span> &lt;job <span class="nb">id</span><span class="o">&gt;]</span> <span class="se">\</span>
      <span class="o">[</span><span class="nt">--fromSavepoint</span> /path/to/savepoint <span class="o">[</span><span class="nt">--allowNonRestoredState</span><span class="o">]]</span> <span class="se">\</span>
      <span class="o">[</span>job arguments]

  docker run flink_with_job_artifacts taskmanager
</code></pre></div>    </div>
  </li>
</ul>

<p>The <code class="highlighter-rouge">standalone-job</code> argument starts a <em>JobManager</em> container in the <em>Job Cluster</em> mode.</p>

<h4 id="jobmanager-additional-command-line-arguments">JobManager additional command line arguments</h4>

<p>You can provide the following additional command line arguments to the cluster entrypoint:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">--job-classname &lt;job class name&gt;</code>: Class name of the job to run.</p>

    <p>By default, Flink scans its class path for a JAR with a Main-Class or program-class manifest entry and chooses it as the job class.
Use this command line argument to manually set the job class.
This argument is required in case that no or more than one JAR with such a manifest entry is available on the class path.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--job-id &lt;job id&gt;</code> (optional): Manually set a Flink job ID for the job (default: 00000000000000000000000000000000)</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--fromSavepoint /path/to/savepoint</code> (optional): Restore from a savepoint</p>

    <p>In order to resume from a savepoint, you also need to pass the savepoint path.
Note that <code class="highlighter-rouge">/path/to/savepoint</code> needs to be accessible in all Docker containers of the cluster
(e.g., storing it on a DFS or from the mounted volume or adding it to the image).</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">--allowNonRestoredState</code> (optional): Skip broken savepoint state</p>

    <p>Additionally you can specify this argument to allow that savepoint state is skipped which cannot be restored.</p>
  </li>
</ul>

<p>If the main function of the user job main class accepts arguments, you can also pass them at the end of the <code class="highlighter-rouge">docker run</code> command.</p>

<h2 id="customize-flink-image">Customize Flink image</h2>

<p>When you run the Flink containers, there may be a need to customize them.
The next chapters describe some how-tos of what you can usually customize.</p>

<h3 id="configure-options">Configure options</h3>

<p>When you run Flink image, you can also change its configuration options by setting the environment variable <code class="highlighter-rouge">FLINK_PROPERTIES</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"jobmanager.rpc.address: host
taskmanager.numberOfTaskSlots: 3
blob.server.port: 6124
"</span>
docker run <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span> flink:1.12.0-scala_2.11 &lt;jobmanager|standalone-job|taskmanager&gt;
</code></pre></div></div>

<p>The <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/config.html#jobmanager-rpc-address"><code class="highlighter-rouge">jobmanager.rpc.address</code></a> option must be configured, others are optional to set.</p>

<p>The environment variable <code class="highlighter-rouge">FLINK_PROPERTIES</code> should contain a list of Flink cluster configuration options separated by new line,
the same way as in the <code class="highlighter-rouge">flink-conf.yaml</code>. <code class="highlighter-rouge">FLINK_PROPERTIES</code> takes precedence over configurations in <code class="highlighter-rouge">flink-conf.yaml</code>.</p>

<h3 id="provide-custom-configuration">Provide custom configuration</h3>

<p>The configuration files (<code class="highlighter-rouge">flink-conf.yaml</code>, logging, hosts etc) are located in the <code class="highlighter-rouge">/opt/flink/conf</code> directory in the Flink image.
To provide a custom location for the Flink configuration files, you can</p>

<ul>
  <li>
    <p><strong>either mount a volume</strong> with the custom configuration files to this path <code class="highlighter-rouge">/opt/flink/conf</code> when you run the Flink image:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker run <span class="se">\</span>
      <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,src<span class="o">=</span>/host/path/to/custom/conf,target<span class="o">=</span>/opt/flink/conf <span class="se">\</span>
      flink:1.12.0-scala_2.11 &lt;jobmanager|standalone-job|taskmanager&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>or add them to your <strong>custom Flink image</strong>, build and run it:</p>

    <p><em>Dockerfile</em>:</p>

    <div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  FROM flink
  ADD /host/path/to/flink-conf.yaml /opt/flink/conf/flink-conf.yaml
  ADD /host/path/to/log4j.properties /opt/flink/conf/log4j.properties
</code></pre></div>    </div>
  </li>
</ul>

<p><span class="label label-warning">Warning!</span> The mounted volume must contain all necessary configuration files.
The <code class="highlighter-rouge">flink-conf.yaml</code> file must have write permission so that the Docker entry point script can modify it in certain cases.</p>

<h3 id="using-plugins">Using plugins</h3>

<p>As described in the <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/plugins.html">plugins</a> documentation page: in order to use plugins they must be
copied to the correct location in the Flink installation in the Docker container for them to work.</p>

<p>If you want to enable plugins provided with Flink (in the <code class="highlighter-rouge">opt/</code> directory of the Flink distribution), you can pass the environment variable <code class="highlighter-rouge">ENABLE_BUILT_IN_PLUGINS</code> when you run the Flink image.
The <code class="highlighter-rouge">ENABLE_BUILT_IN_PLUGINS</code> should contain a list of plugin jar file names separated by <code class="highlighter-rouge">;</code>. A valid plugin name is for example <code class="highlighter-rouge">flink-s3-fs-hadoop-1.12.0.jar</code></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    docker run <span class="se">\</span>
        <span class="nt">--env</span> <span class="nv">ENABLE_BUILT_IN_PLUGINS</span><span class="o">=</span>flink-plugin1.jar<span class="p">;</span>flink-plugin2.jar <span class="se">\</span>
        flink:1.12.0-scala_2.11 &lt;jobmanager|standalone-job|taskmanager&gt;
</code></pre></div></div>

<p>There are also more <a href="#advanced-customization">advanced ways</a> for customizing the Flink image.</p>

<h3 id="switch-memory-allocator">Switch memory allocator</h3>

<p>Flink introduced <code class="highlighter-rouge">jemalloc</code> as default memory allocator to resolve memory fragmentation problem (please refer to <a href="https://issues.apache.org/jira/browse/FLINK-19125">FLINK-19125</a>).</p>

<p>You could switch back to use <code class="highlighter-rouge">glibc</code> as memory allocator to restore the old behavior or if any unexpected memory consumption or problem observed
(and please report the issue via JIRA or mailing list if you found any), by passing <code class="highlighter-rouge">disable-jemalloc</code> parameter:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    docker run &lt;jobmanager|standalone-job|taskmanager&gt; disable-jemalloc
</code></pre></div></div>

<h3 id="advanced-customization">Advanced customization</h3>

<p>There are several ways in which you can further customize the Flink image:</p>

<ul>
  <li>install custom software (e.g. python)</li>
  <li>enable (symlink) optional libraries or plugins from <code class="highlighter-rouge">/opt/flink/opt</code> into <code class="highlighter-rouge">/opt/flink/lib</code> or <code class="highlighter-rouge">/opt/flink/plugins</code></li>
  <li>add other libraries to <code class="highlighter-rouge">/opt/flink/lib</code> (e.g. Hadoop)</li>
  <li>add other plugins to <code class="highlighter-rouge">/opt/flink/plugins</code></li>
</ul>

<p>See also: <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/#how-to-provide-dependencies-in-the-classpath">How to provide dependencies in the classpath</a>.</p>

<p>You can customize the Flink image in several ways:</p>

<ul>
  <li>
    <p><strong>override the container entry point</strong> with a custom script where you can run any bootstrap actions.
At the end you can call the standard <code class="highlighter-rouge">/docker-entrypoint.sh</code> script of the Flink image with the same arguments
as described in <a href="#how-to-run-flink-image">how to run the Flink image</a>.</p>

    <p>The following example creates a custom entry point script which enables more libraries and plugins.
The custom script, custom library and plugin are provided from a mounted volume.
Then it runs the standard entry point script of the Flink image:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c"># create custom_lib.jar</span>
  <span class="c"># create custom_plugin.jar</span>

  <span class="nb">echo</span> <span class="s2">"
  ln -fs /opt/flink/opt/flink-queryable-state-runtime-*.jar /opt/flink/lib/.  # enable an optional library
  ln -fs /mnt/custom_lib.jar /opt/flink/lib/.  # enable a custom library

  mkdir -p /opt/flink/plugins/flink-s3-fs-hadoop
  ln -fs /opt/flink/opt/flink-s3-fs-hadoop-*.jar /opt/flink/plugins/flink-s3-fs-hadoop/.  # enable an optional plugin

  mkdir -p /opt/flink/plugins/custom_plugin
  ln -fs /mnt/custom_plugin.jar /opt/flink/plugins/custom_plugin/.  # enable a custom plugin

  /docker-entrypoint.sh &lt;jobmanager|standalone-job|taskmanager&gt;
  "</span> <span class="o">&gt;</span> custom_entry_point_script.sh

  <span class="nb">chmod </span>755 custom_entry_point_script.sh

  docker run <span class="se">\</span>
      <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,src<span class="o">=</span><span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>,target<span class="o">=</span>/mnt
      flink:1.12.0-scala_2.11 /mnt/custom_entry_point_script.sh
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>extend the Flink image</strong> by writing a custom <code class="highlighter-rouge">Dockerfile</code> and build a custom image:</p>

    <p><em>Dockerfile</em>:</p>

    <div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  FROM flink

  RUN set -ex; apt-get update; apt-get -y install python

  ADD /host/path/to/flink-conf.yaml /container/local/path/to/custom/conf/flink-conf.yaml
  ADD /host/path/to/log4j.properties /container/local/path/to/custom/conf/log4j.properties

  RUN ln -fs /opt/flink/opt/flink-queryable-state-runtime-*.jar /opt/flink/lib/.

  RUN mkdir -p /opt/flink/plugins/flink-s3-fs-hadoop
  RUN ln -fs /opt/flink/opt/flink-s3-fs-hadoop-*.jar /opt/flink/plugins/flink-s3-fs-hadoop/.

  ENV VAR_NAME value
</code></pre></div>    </div>

    <p><strong>Commands for building</strong>:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker build <span class="nt">-t</span> custom_flink_image <span class="nb">.</span>
  <span class="c"># optional push to your docker image registry if you have it,</span>
  <span class="c"># e.g. to distribute the custom image to your cluster</span>
  docker push custom_flink_image
</code></pre></div>    </div>
  </li>
</ul>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="flink-with-docker-compose">Flink with Docker Compose</h2>

<p><a href="https://docs.docker.com/compose/">Docker Compose</a> is a way to run a group of Docker containers locally.
The next chapters show examples of configuration files to run Flink.</p>

<h3 id="usage">Usage</h3>

<ul>
  <li>Create the <code class="highlighter-rouge">yaml</code> files with the container configuration, check examples for:
    <ul>
      <li><a href="#session-cluster-with-docker-compose">Session cluster</a></li>
      <li><a href="#job-cluster-with-docker-compose">Job cluster</a></li>
    </ul>

    <p>See also <a href="#image-tags">the Flink Docker image tags</a> and <a href="#advanced-customization">how to customize the Flink Docker image</a>
  for usage in the configuration files.</p>
  </li>
  <li>
    <p>Launch a cluster in the foreground</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker-compose up
</code></pre></div>    </div>
  </li>
  <li>
    <p>Launch a cluster in the background</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker-compose up <span class="nt">-d</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Scale the cluster up or down to <em>N TaskManagers</em></p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker-compose scale <span class="nv">taskmanager</span><span class="o">=</span>&lt;N&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Access the <em>JobManager</em> container</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker <span class="nb">exec</span> <span class="nt">-it</span> <span class="si">$(</span>docker ps <span class="nt">--filter</span> <span class="nv">name</span><span class="o">=</span>jobmanager <span class="nt">--format</span><span class="o">={{</span>.ID<span class="o">}}</span><span class="si">)</span> /bin/sh
</code></pre></div>    </div>
  </li>
  <li>
    <p>Kill the cluster</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker-compose <span class="nb">kill</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Access Web UI</p>

    <p>When the cluster is running, you can visit the web UI at <a href="http://localhost:8081">http://localhost:8081</a>.
  You can also use the web UI to submit a job to a <em>Session cluster</em>.</p>
  </li>
  <li>
    <p>To submit a job to a <em>Session cluster</em> via the command line, you can either</p>

    <ul>
      <li>
        <p>use <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/cli.html">Flink CLI</a> on the host if it is installed:</p>

        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>flink run <span class="nt">-d</span> <span class="nt">-c</span> <span class="k">${</span><span class="nv">JOB_CLASS_NAME</span><span class="k">}</span> /job.jar
</code></pre></div>        </div>
      </li>
      <li>
        <p>or copy the JAR to the <em>JobManager</em> container and submit the job using the <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/cli.html">CLI</a> from there, for example:</p>

        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">JOB_CLASS_NAME</span><span class="o">=</span><span class="s2">"com.job.ClassName"</span>
<span class="nv">JM_CONTAINER</span><span class="o">=</span><span class="si">$(</span>docker ps <span class="nt">--filter</span> <span class="nv">name</span><span class="o">=</span>jobmanager <span class="nt">--format</span><span class="o">={{</span>.ID<span class="o">}}</span><span class="si">)</span><span class="o">)</span>
docker <span class="nb">cp </span>path/to/jar <span class="s2">"</span><span class="k">${</span><span class="nv">JM_CONTAINER</span><span class="k">}</span><span class="s2">"</span>:/job.jar
docker <span class="nb">exec</span> <span class="nt">-t</span> <span class="nt">-i</span> <span class="s2">"</span><span class="k">${</span><span class="nv">JM_CONTAINER</span><span class="k">}</span><span class="s2">"</span> flink run <span class="nt">-d</span> <span class="nt">-c</span> <span class="k">${</span><span class="nv">JOB_CLASS_NAME</span><span class="k">}</span> /job.jar
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="session-cluster-with-docker-compose">Session Cluster with Docker Compose</h3>

<p><strong>docker-compose.yml:</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2.2"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">jobmanager</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">flink:1.12.0-scala_2.11</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8081:8081"</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">jobmanager</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="pi">|</span>
        <span class="s">FLINK_PROPERTIES=</span>
        <span class="s">jobmanager.rpc.address: jobmanager</span>

  <span class="na">taskmanager</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">flink:1.12.0-scala_2.11</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">jobmanager</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">taskmanager</span>
    <span class="na">scale</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="pi">|</span>
        <span class="s">FLINK_PROPERTIES=</span>
        <span class="s">jobmanager.rpc.address: jobmanager</span>
        <span class="s">taskmanager.numberOfTaskSlots: 2</span>
</code></pre></div></div>

<h3 id="job-cluster-with-docker-compose">Job Cluster with Docker Compose</h3>

<p>The artifacts must be available in the Flink containers, check details <a href="#start-a-job-cluster">here</a>.
See also <a href="#jobmanager-additional-command-line-arguments">how to specify the JobManager arguments</a>
in the <code class="highlighter-rouge">command</code> for the <code class="highlighter-rouge">jobmanager</code> service.</p>

<p><strong>docker-compose.yml:</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2.2"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">jobmanager</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">flink:1.12.0-scala_2.11</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8081:8081"</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">standalone-job --job-classname com.job.ClassName [--job-id &lt;job id&gt;] [--fromSavepoint /path/to/savepoint [--allowNonRestoredState]] [job arguments]</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/host/path/to/job/artifacts:/opt/flink/usrlib</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="pi">|</span>
        <span class="s">FLINK_PROPERTIES=</span>
        <span class="s">jobmanager.rpc.address: jobmanager</span>
        <span class="s">parallelism.default: 2</span>

  <span class="na">taskmanager</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">flink:1.12.0-scala_2.11</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">jobmanager</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">taskmanager</span>
    <span class="na">scale</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/host/path/to/job/artifacts:/opt/flink/usrlib</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="pi">|</span>
        <span class="s">FLINK_PROPERTIES=</span>
        <span class="s">jobmanager.rpc.address: jobmanager</span>
        <span class="s">taskmanager.numberOfTaskSlots: 2</span>
        <span class="s">parallelism.default: 2</span>
</code></pre></div></div>

<h3 id="enabling-python">Enabling Python</h3>

<p>To build a custom image which has Python and Pyflink prepared, you can refer to the following Dockerfile:</p>

<figure class="highlight"><pre><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> flink</span>

<span class="c"># install python3 and pip3</span>
<span class="k">RUN </span>apt-get update <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="se">\
</span>apt-get <span class="nb">install</span> <span class="nt">-y</span> python3.7 python3-pip python3.7-dev <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-rf</span> /var/lib/apt/lists/<span class="k">*</span>
<span class="k">RUN </span><span class="nb">ln</span> <span class="nt">-s</span> /usr/bin/python3 /usr/bin/python

<span class="c"># install Python Flink</span>
<span class="k">RUN </span>pip3 <span class="nb">install </span>apache-flink</code></pre></figure>

<p>Build the image named as <strong>pyflink:latest</strong>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>docker build <span class="nt">-t</span> pyflink:latest .</code></pre></figure>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="flink-with-docker-swarm">Flink with Docker Swarm</h2>

<p>The <a href="https://docs.docker.com/engine/swarm">Docker swarm</a> is a container orchestration tool, that
allows you to manage multiple containers deployed across multiple host machines.</p>

<p>The following chapters contain examples of how to configure and start <em>JobManager</em> and <em>TaskManager</em> containers.
You can adjust them accordingly to start a cluster.
See also <a href="#image-tags">the Flink Docker image tags</a> and <a href="#advanced-customization">how to customize the Flink Docker image</a> for usage in the provided scripts.</p>

<p>The port <code class="highlighter-rouge">8081</code> is exposed for the Flink Web UI access.
If you run the swarm locally, you can visit the web UI at <a href="http://localhost:8081">http://localhost:8081</a> after starting the cluster.</p>

<h3 id="session-cluster-with-docker-swarm">Session Cluster with Docker Swarm</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"jobmanager.rpc.address: flink-session-jobmanager
taskmanager.numberOfTaskSlots: 2
"</span>

<span class="c"># Create overlay network</span>
docker network create <span class="nt">-d</span> overlay flink-session

<span class="c"># Create the JobManager service</span>
docker service create <span class="se">\</span>
  <span class="nt">--name</span> flink-session-jobmanager <span class="se">\</span>
  <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-p</span> 8081:8081 <span class="se">\</span>
  <span class="nt">--network</span> flink-session <span class="se">\</span>
  flink:1.12.0-scala_2.11 <span class="se">\</span>
    jobmanager

<span class="c"># Create the TaskManager service (scale this out as needed)</span>
docker service create <span class="se">\</span>
  <span class="nt">--name</span> flink-session-taskmanager <span class="se">\</span>
  <span class="nt">--replicas</span> 2 <span class="se">\</span>
  <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">--network</span> flink-session <span class="se">\</span>
  flink:1.12.0-scala_2.11 <span class="se">\</span>
    taskmanager
</code></pre></div></div>

<h3 id="job-cluster-with-docker-swarm">Job Cluster with Docker Swarm</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"jobmanager.rpc.address: flink-jobmanager
taskmanager.numberOfTaskSlots: 2
"</span>

<span class="c"># Create overlay network</span>
docker network create <span class="nt">-d</span> overlay flink-job

<span class="c"># Create the JobManager service</span>
docker service create <span class="se">\</span>
  <span class="nt">--name</span> flink-jobmanager <span class="se">\</span>
  <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,source<span class="o">=</span>/host/path/to/job/artifacts,target<span class="o">=</span>/opt/flink/usrlib <span class="se">\</span>
  <span class="nt">-p</span> 8081:8081 <span class="se">\</span>
  <span class="nt">--network</span> flink-job <span class="se">\</span>
  flink:1.12.0-scala_2.11 <span class="se">\</span>
    standalone-job <span class="se">\</span>
    <span class="nt">--job-classname</span> com.job.ClassName <span class="se">\</span>
    <span class="o">[</span><span class="nt">--job-id</span> &lt;job <span class="nb">id</span><span class="o">&gt;]</span> <span class="se">\</span>
    <span class="o">[</span><span class="nt">--fromSavepoint</span> /path/to/savepoint <span class="o">[</span><span class="nt">--allowNonRestoredState</span><span class="o">]]</span> <span class="se">\</span>
    <span class="o">[</span>job arguments]

<span class="c"># Create the TaskManager service (scale this out as needed)</span>
docker service create <span class="se">\</span>
  <span class="nt">--name</span> flink-job-taskmanager <span class="se">\</span>
  <span class="nt">--replicas</span> 2 <span class="se">\</span>
  <span class="nt">--env</span> <span class="nv">FLINK_PROPERTIES</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">FLINK_PROPERTIES</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,source<span class="o">=</span>/host/path/to/job/artifacts,target<span class="o">=</span>/opt/flink/usrlib <span class="se">\</span>
  <span class="nt">--network</span> flink-job <span class="se">\</span>
  flink:1.12.0-scala_2.11 <span class="se">\</span>
    taskmanager
</code></pre></div></div>

<p>The <em>job artifacts</em> must be available in the <em>JobManager</em> container, as outlined <a href="#start-a-job-cluster">here</a>.
See also <a href="#jobmanager-additional-command-line-arguments">how to specify the JobManager arguments</a> to pass them
to the <code class="highlighter-rouge">flink-jobmanager</code> container.</p>

<p>The example assumes that you run the swarm locally and expects the <em>job artifacts</em> to be in <code class="highlighter-rouge">/host/path/to/job/artifacts</code>.
It also mounts the host path with the artifacts as a volume to the container’s path <code class="highlighter-rouge">/opt/flink/usrlib</code>.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>



<div class="footer">
  <a href="https://cwiki.apache.org/confluence/display/FLINK/Flink+Translation+Specifications" target="_blank">
    
      想参与贡献翻译？
    
  </a>
</div>


        </div>
      </div>
    </div><!-- /.container -->

    <!-- default code tab -->
    <script>var defaultCodeTab = "";</script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>

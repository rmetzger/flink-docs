<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.12 Documentation: Graph API</title>
    <link rel="shortcut icon" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/favicon.ico" type="image/x-icon">
    <link rel="canonical" href="//ci.apache.org/projects/flink/flink-docs-stable/zh/dev/libs/gelly/graph_api.html">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/flink.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/syntax.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/codetabs.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/font-awesome/css/font-awesome.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    

    <!-- Main content. -->
    <div class="container">
      
      <div class="row">
        <div class="col-lg-3" id="sidenavcol">
          <div class="sidenav-logo">
  <p><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/"><img class="bottom" alt="Apache Flink" src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/img/navbar-brand-logo.jpg"></a> v1.12</p>
</div>
<ul id="sidenav">
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/"><i class="fa fa-home title" aria-hidden="true"></i> Home</a></li><hr class="section-break"></hr>
<li><a href="#collapse-2" data-toggle="collapse"><i class="fa fa-rocket title appetizer" aria-hidden="true"></i> Try Flink<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-2"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/local_installation.html">本地模式安装</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/datastream_api.html">基于 DataStream API 实现欺诈检测</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/table_api.html">基于 Table API 实现实时报表</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/flink-operations-playground.html">Flink 操作场景</a></li>
</ul></div></li>
<li><a href="#collapse-8" data-toggle="collapse"><i class="fa fa-hand-paper-o title appetizer" aria-hidden="true"></i> 实践练习<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-8"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/datastream_api.html">DataStream API 简介</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/etl.html">数据管道 & ETL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/streaming_analytics.html">流式分析</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/event_driven.html">事件驱动应用</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/learn-flink/fault_tolerance.html">容错处理</a></li>
</ul></div></li>
<li><a href="#collapse-15" data-toggle="collapse"><i class="fa fa-map-o title appetizer" aria-hidden="true"></i> 概念透析<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-15"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/index.html">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/stateful-stream-processing.html">有状态流处理</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/timely-stream-processing.html">及时流处理</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/flink-architecture.html">Flink 架构</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/concepts/glossary.html">词汇表</a></li>
</ul></div></li><hr class="section-break"></hr>
<li><a href="#collapse-21" data-toggle="collapse"><i class="fa fa-code title maindish" aria-hidden="true"></i> 应用开发<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-21"><ul>
<li><a href="#collapse-22" data-toggle="collapse">DataStream API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-22"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/datastream_api.html">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/datastream_execution_mode.html">Execution Mode (Batch/Streaming)</a></li>
<li><a href="#collapse-24" data-toggle="collapse">事件时间<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-24"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/event_time.html">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/event_timestamps_watermarks.html">生成 Watermark</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/event_timestamp_extractors.html">内置 Watermark 生成器</a></li>
</ul></div></li>
<li><a href="#collapse-28" data-toggle="collapse">状态与容错<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-28"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/state.html">Working with State</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/broadcast_state.html">Broadcast State 模式</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/checkpointing.html">Checkpointing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/queryable_state.html">Queryable State</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/state_backends.html">State Backends</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/schema_evolution.html">状态数据结构升级</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/state/custom_serialization.html">自定义状态序列化</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/user_defined_functions.html">用户自定义 Functions</a></li>
<li><a href="#collapse-38" data-toggle="collapse">算子<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-38"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/windows.html">窗口</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/joining.html">Joining</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/process_function.html">Process Function</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/operators/asyncio.html">异步 I/O</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/sources.html">Data Sources</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/side_output.html">旁路输出</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/application_parameters.html">Handling Application Parameters</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/testing.html">测试</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/stream/experimental.html">实验功能</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/scala_api_extensions.html">Scala API Extensions</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/java_lambdas.html">Java Lambda 表达式</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/project-configuration.html">Project Configuration</a></li>
</ul></div></li>
<li><a href="#collapse-53" data-toggle="collapse">DataSet API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-53"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/dataset_transformations.html">Transformations</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/iterations.html">迭代</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/zip_elements_guide.html">Zipping Elements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/hadoop_compatibility.html">Hadoop 兼容</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/local_execution.html">本地执行</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/cluster_execution.html">集群执行</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/examples.html">Batch 示例</a></li>
</ul></div></li>
<li><a href="#collapse-62" data-toggle="collapse">Table API & SQL<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-62"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/common.html">概念与通用 API</a></li>
<li><a href="#collapse-64" data-toggle="collapse">流式概念<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-64"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/dynamic_tables.html">动态表 (Dynamic Table)</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/time_attributes.html">时间属性</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/joins.html">流上的 Join</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/temporal_tables.html">时态表（Temporal Tables）</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/match_recognize.html">模式检测</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/query_configuration.html">Query Configuration</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/types.html">数据类型</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/tableApi.html">Table API</a></li>
<li><a href="#collapse-74" data-toggle="collapse">SQL<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-74"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/queries.html">查询语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/create.html">CREATE 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/drop.html">DROP 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/alter.html">ALTER 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/insert.html">INSERT 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/hints.html">SQL Hints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/describe.html">DESCRIBE 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/explain.html">EXPLAIN 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/use.html">USE 语句</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sql/show.html">SHOW 语句</a></li>
</ul></div></li>
<li><a href="#collapse-86" data-toggle="collapse">函数<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-86"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/functions/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/functions/systemFunctions.html">系统（内置）函数</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/functions/udfs.html">自定义函数</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/modules.html">模块</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/catalogs.html">Catalogs</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sqlClient.html">SQL 客户端</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/config.html">配置</a></li>
<li><a href="#collapse-94" data-toggle="collapse">Performance Tuning<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-94"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/tuning/streaming_aggregation_optimization.html">流式聚合</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/sourceSinks.html">User-defined Sources & Sinks</a></li>
</ul></div></li>
<li><a href="#collapse-99" data-toggle="collapse">Python API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-99"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/installation.html">环境安装</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table_api_tutorial.html">Table API 教程</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/datastream_tutorial.html">DataStream API 教程</a></li>
<li><a href="#collapse-103" data-toggle="collapse">Table API用户指南<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-103"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/intro_to_table_api.html">Python Table API 简介</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/table_environment.html">TableEnvironment</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/operations.html">Operations</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/python_types.html">数据类型</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/built_in_functions.html">系统（内置）函数</a></li>
<li><a href="#collapse-109" data-toggle="collapse">自定义函数<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-109"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/udfs/python_udfs.html">普通自定义函数（UDF）</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/udfs/vectorized_python_udfs.html">向量化自定义函数</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/conversion_of_pandas.html">PyFlink Table 和 Pandas DataFrame 互转</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/dependency_management.html">依赖管理</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/sql.html">SQL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/catalogs.html">Catalogs</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/metrics.html">指标</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/table-api-users-guide/python_table_api_connectors.html">连接器</a></li>
</ul></div></li>
<li><a href="#collapse-120" data-toggle="collapse">DataStream API用户指南<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-120"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/datastream-api-users-guide/data_types.html">数据类型</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/datastream-api-users-guide/operators.html">算子</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/datastream-api-users-guide/dependency_management.html">依赖管理</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/python_config.html">配置</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/environment_variables.html">环境变量</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/python/faq.html">常见问题</a></li>
</ul></div></li>
<li><a href="#collapse-129" data-toggle="collapse">数据类型以及序列化<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-129"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/types_serialization.html">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/custom_serializers.html">自定义序列化器</a></li>
</ul></div></li>
<li><a href="#collapse-132" data-toggle="collapse">管理执行<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-132"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/execution_configuration.html">执行配置</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/packaging.html">程序打包</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/parallel.html">并行执行</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/execution_plans.html">执行计划</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/task_failure_recovery.html">Task 故障恢复</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/migration.html">API 迁移指南</a></li>
</ul></div></li>
<li><a href="#collapse-141" data-toggle="collapse"class="active"><i class="fa fa-book title maindish" aria-hidden="true"></i> Libraries</a><div class="collapse in" id="collapse-141"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/cep.html">事件处理 (CEP)</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/state_processor_api.html">State Processor API</a></li>
<li><a href="#collapse-144" data-toggle="collapse"class="active">图计算: Gelly</a><div class="collapse in" id="collapse-144"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/graph_api.html" class="active">Graph API</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/iterative_graph_processing.html">Iterative Graph Processing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/library_methods.html">Library Methods</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/graph_algorithms.html">Graph Algorithms</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/graph_generators.html">Graph Generators</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/bipartite_graph.html">Bipartite Graph</a></li>
</ul></div></li>
</ul></div></li>
<li><a href="#collapse-153" data-toggle="collapse"><i class="fa fa-random title maindish" aria-hidden="true"></i> Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-153"><ul>
<li><a href="#collapse-154" data-toggle="collapse">DataStream Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-154"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/guarantees.html">容错保证</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/kafka.html">Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/cassandra.html">Cassandra</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/kinesis.html">Kinesis</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/elasticsearch.html">Elasticsearch</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/file_sink.html">File Sink</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/streamfile_sink.html">Streaming File Sink</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/rabbitmq.html">RabbitMQ</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/nifi.html">NiFi</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/pubsub.html">Google Cloud PubSub</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/twitter.html">Twitter</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/connectors/jdbc.html">JDBC</a></li>
</ul></div></li>
<li><a href="#collapse-168" data-toggle="collapse">Table & SQL Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-168"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/">概览</a></li>
<li><a href="#collapse-169" data-toggle="collapse">Formats<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-169"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/csv.html">CSV</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/json.html">JSON</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/avro-confluent.html">Confluent Avro</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/avro.html">Avro</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/debezium.html">Debezium</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/canal.html">Canal</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/maxwell.html">Maxwell</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/parquet.html">Parquet</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/orc.html">Orc</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/formats/raw.html">Raw</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/kafka.html">Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/upsert-kafka.html">Upsert Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/kinesis.html">Kinesis</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/jdbc.html">JDBC</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/elasticsearch.html">Elasticsearch</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/filesystem.html">FileSystem</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hbase.html">HBase</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/datagen.html">DataGen</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/print.html">Print</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/blackhole.html">BlackHole</a></li>
<li><a href="#collapse-191" data-toggle="collapse">Hive<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-191"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/hive_catalog.html">Hive Catalog</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/hive_dialect.html">Hive 方言</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/hive_read_write.html">Hive Read & Write</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/hive/hive_functions.html">Hive 函数</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/connectors/downloads.html">下载</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/batch/connectors.html">DataSet Connectors</a></li>
</ul></div></li>
<li><a href="#collapse-201" data-toggle="collapse"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-201"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/">概览</a></li>
<li><a href="#collapse-202" data-toggle="collapse">Resource Providers<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-202"><ul>
<li><a href="#collapse-203" data-toggle="collapse">Standalone<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-203"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/local.html">本地集群</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/docker.html">Docker</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/standalone/kubernetes.html">Kubernetes</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/native_kubernetes.html">Native Kubernetes</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/yarn.html">YARN</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/resource-providers/mesos.html">Mesos</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/config.html">配置参数</a></li>
<li><a href="#collapse-213" data-toggle="collapse">内存配置<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-213"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_setup.html">配置 Flink 进程的内存</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_setup_tm.html">配置 TaskManager 内存</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_setup_jobmanager.html">配置 JobManager 内存</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_tuning.html">调优指南</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_trouble.html">常见问题</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_migration.html">升级指南</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/cli.html">Command-Line Interface</a></li>
<li><a href="#collapse-222" data-toggle="collapse">文件系统<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-222"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/common.html">通用配置</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/s3.html">Amazon S3</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/oss.html">阿里云 OSS</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/azure.html">Azure Blob 存储</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/filesystems/plugins.html">Plugins</a></li>
</ul></div></li>
<li><a href="#collapse-229" data-toggle="collapse">High Availability (HA)<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-229"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/ha/">概览</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/ha/zookeeper_ha.html">ZooKeeper HA Services</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/ha/kubernetes_ha.html">Kubernetes HA Services</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/metric_reporters.html">Metric Reporters</a></li>
<li><a href="#collapse-234" data-toggle="collapse">Security<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-234"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/security/security-ssl.html">SSL 设置</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/security/security-kerberos.html">Kerberos</a></li>
</ul></div></li>
<li><a href="#collapse-238" data-toggle="collapse">REPLs<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-238"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/repls/python_shell.html">Python REPL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/repls/scala_shell.html">Scala REPL</a></li>
</ul></div></li>
<li><a href="#collapse-242" data-toggle="collapse">Advanced<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-242"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/advanced/external_resources.html">扩展资源</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/advanced/historyserver.html">History Server</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/advanced/logging.html">日志</a></li>
</ul></div></li>
</ul></div></li>
<li><a href="#collapse-248" data-toggle="collapse"><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Operations<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-248"><ul>
<li><a href="#collapse-249" data-toggle="collapse">状态与容错<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-249"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/state/checkpoints.html">Checkpoints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/state/savepoints.html">Savepoints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/state/state_backends.html">State Backends</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/state/large_state_tuning.html">大状态与 Checkpoint 调优</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/metrics.html">指标</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/rest_api.html">REST API</a></li>
<li><a href="#collapse-257" data-toggle="collapse">Debugging<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-257"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/debugging/debugging_event_time.html">调试窗口与事件时间</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/debugging/debugging_classloading.html">调试类加载</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/debugging/application_profiling.html">应用程序分析</a></li>
</ul></div></li>
<li><a href="#collapse-262" data-toggle="collapse">Monitoring<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-262"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/monitoring/checkpoint_monitoring.html">监控 Checkpoint</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/monitoring/back_pressure.html">监控反压</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/upgrading.html">升级应用程序和 Flink 版本</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/ops/production_ready.html">生产就绪情况核对清单</a></li>
</ul></div></li><hr class="section-break"></hr>
<li><a href="#collapse-269" data-toggle="collapse"><i class="fa fa-cogs title dessert" aria-hidden="true"></i> Flink 开发<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-269"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/flinkDev/ide_setup.html">导入 Flink 到 IDE 中</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/flinkDev/building.html">从源码构建 Flink</a></li>
</ul></div></li>
<li><a href="#collapse-273" data-toggle="collapse"><i class="fa fa-book title dessert" aria-hidden="true"></i> 内幕<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-273"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/internals/job_scheduling.html">作业调度</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/internals/task_lifecycle.html">Task 生命周期</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/internals/filesystems.html">文件系统</a></li>
</ul></div></li>
  <li class="divider"></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/java"><i class="fa fa-external-link title" aria-hidden="true"></i> Javadocs</a></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/scala/index.html#org.apache.flink.api.scala.package"><i class="fa fa-external-link title" aria-hidden="true"></i> Scaladocs</a></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/python"><i class="fa fa-external-link title" aria-hidden="true"></i> Pythondocs</a></li>
  <li><a href="http://flink.apache.org"><i class="fa fa-external-link title" aria-hidden="true"></i> Project Page</a></li>
</ul>

<div class="sidenav-search-box">
  <form class="navbar-form" role="search" action="//ci.apache.org/projects/flink/flink-docs-release-1.12/search-results.html">
    <div class="form-group">
      <input type="text" class="form-control" size="16px" name="q" placeholder="Search">
    </div>
    <button type="submit" class="btn btn-default">Go</button>
  </form>
</div>

<div class="sidenav-versions">
  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">选择文档版本<span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.11">v1.11</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.10">v1.10</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.9">v1.9</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.8">v1.8</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.7">v1.7</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.6">v1.6</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.5">v1.5</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.4">v1.4</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.3">v1.3</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.2">v1.2</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.1">v1.1</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.0">v1.0</a></li>
    </ul>
  </div>
</div>

<div class="sidenav-languages"><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/gelly/graph_api.html">
      <button type="submit" class="btn btn-default">English</button>
    </a>
</div>

        </div>
        <div class="col-lg-9 content" id="contentcol">

          

<ol class="breadcrumb">
  
    <li><i class="fa fa-book title maindish" aria-hidden="true"></i> Libraries</li>
  
    <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/libs/gelly/">图计算: Gelly</a></li>
  
    <li class="active">Graph API</li>
</ol>

<h1>Graph API</h1>




<ul id="markdown-toc">
  <li><a href="#graph-representation" id="markdown-toc-graph-representation">Graph Representation</a></li>
  <li><a href="#graph-creation" id="markdown-toc-graph-creation">Graph Creation</a></li>
  <li><a href="#graph-properties" id="markdown-toc-graph-properties">Graph Properties</a></li>
  <li><a href="#graph-transformations" id="markdown-toc-graph-transformations">Graph Transformations</a></li>
  <li><a href="#graph-mutations" id="markdown-toc-graph-mutations">Graph Mutations</a></li>
  <li><a href="#neighborhood-methods" id="markdown-toc-neighborhood-methods">Neighborhood Methods</a></li>
  <li><a href="#graph-validation" id="markdown-toc-graph-validation">Graph Validation</a></li>
</ul>

<h2 id="graph-representation">Graph Representation</h2>

<p>In Gelly, a <code class="highlighter-rouge">Graph</code> is represented by a <code class="highlighter-rouge">DataSet</code> of vertices and a <code class="highlighter-rouge">DataSet</code> of edges.</p>

<p>The <code class="highlighter-rouge">Graph</code> nodes are represented by the <code class="highlighter-rouge">Vertex</code> type. A <code class="highlighter-rouge">Vertex</code> is defined by a unique ID and a value. <code class="highlighter-rouge">Vertex</code> IDs should implement the <code class="highlighter-rouge">Comparable</code> interface. Vertices without value can be represented by setting the value type to <code class="highlighter-rouge">NullValue</code>.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// create a new vertex with a Long ID and a String value</span>
<span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;(</span><span class="mi">1L</span><span class="o">,</span> <span class="s">"foo"</span><span class="o">);</span>

<span class="c1">// create a new vertex with a Long ID and no value</span>
<span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">&gt;(</span><span class="mi">1L</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">.</span><span class="na">getInstance</span><span class="o">());</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="c1">// create a new vertex with a Long ID and a String value</span>
<span class="k">val</span> <span class="nv">v</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Vertex</span><span class="o">(</span><span class="mi">1L</span><span class="o">,</span> <span class="s">"foo"</span><span class="o">)</span>

<span class="c1">// create a new vertex with a Long ID and no value</span>
<span class="k">val</span> <span class="nv">v</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Vertex</span><span class="o">(</span><span class="mi">1L</span><span class="o">,</span> <span class="nv">NullValue</span><span class="o">.</span><span class="py">getInstance</span><span class="o">())</span></code></pre></figure>

  </div>
</div>

<p>The graph edges are represented by the <code class="highlighter-rouge">Edge</code> type. An <code class="highlighter-rouge">Edge</code> is defined by a source ID (the ID of the source <code class="highlighter-rouge">Vertex</code>), a target ID (the ID of the target <code class="highlighter-rouge">Vertex</code>) and an optional value. The source and target IDs should be of the same type as the <code class="highlighter-rouge">Vertex</code> IDs. Edges with no value have a <code class="highlighter-rouge">NullValue</code> value type.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">e</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;(</span><span class="mi">1L</span><span class="o">,</span> <span class="mi">2L</span><span class="o">,</span> <span class="mf">0.5</span><span class="o">);</span>

<span class="c1">// reverse the source and target of this edge</span>
<span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">reversed</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">reverse</span><span class="o">();</span>

<span class="nc">Double</span> <span class="n">weight</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span> <span class="c1">// weight = 0.5</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">e</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Edge</span><span class="o">(</span><span class="mi">1L</span><span class="o">,</span> <span class="mi">2L</span><span class="o">,</span> <span class="mf">0.5</span><span class="o">)</span>

<span class="c1">// reverse the source and target of this edge</span>
<span class="k">val</span> <span class="nv">reversed</span> <span class="k">=</span> <span class="nv">e</span><span class="o">.</span><span class="py">reverse</span>

<span class="k">val</span> <span class="nv">weight</span> <span class="k">=</span> <span class="nv">e</span><span class="o">.</span><span class="py">getValue</span> <span class="c1">// weight = 0.5</span></code></pre></figure>

  </div>
</div>

<p>In Gelly an <code class="highlighter-rouge">Edge</code> is always directed from the source vertex to the target vertex. A <code class="highlighter-rouge">Graph</code> may be undirected if for
every <code class="highlighter-rouge">Edge</code> it contains a matching <code class="highlighter-rouge">Edge</code> from the target vertex to the source vertex.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="graph-creation">Graph Creation</h2>

<p>You can create a <code class="highlighter-rouge">Graph</code> in the following ways:</p>

<ul>
  <li>from a <code class="highlighter-rouge">DataSet</code> of edges and an optional <code class="highlighter-rouge">DataSet</code> of vertices:</li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">vertices</span> <span class="o">=</span> <span class="o">...</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">edges</span> <span class="o">=</span> <span class="o">...</span>

<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromDataSet</span><span class="o">(</span><span class="n">vertices</span><span class="o">,</span> <span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>

<span class="k">val</span> <span class="nv">vertices</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">Vertex</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Long</span><span class="o">]]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="nv">edges</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">Edge</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Double</span><span class="o">]]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="nv">graph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromDataSet</span><span class="o">(</span><span class="n">vertices</span><span class="o">,</span> <span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<ul>
  <li>from a <code class="highlighter-rouge">DataSet</code> of <code class="highlighter-rouge">Tuple2</code> representing the edges. Gelly will convert each <code class="highlighter-rouge">Tuple2</code> to an <code class="highlighter-rouge">Edge</code>, where the first field will be the source ID and the second field will be the target ID. Both vertex and edge values will be set to <code class="highlighter-rouge">NullValue</code>.</li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">edges</span> <span class="o">=</span> <span class="o">...</span>

<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromTuple2DataSet</span><span class="o">(</span><span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>

<span class="k">val</span> <span class="nv">edges</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[(</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">)]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="nv">graph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromTuple2DataSet</span><span class="o">(</span><span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<ul>
  <li>from a <code class="highlighter-rouge">DataSet</code> of <code class="highlighter-rouge">Tuple3</code> and an optional <code class="highlighter-rouge">DataSet</code> of <code class="highlighter-rouge">Tuple2</code>. In this case, Gelly will convert each <code class="highlighter-rouge">Tuple3</code> to an <code class="highlighter-rouge">Edge</code>, where the first field will be the source ID, the second field will be the target ID and the third field will be the edge value. Equivalently, each <code class="highlighter-rouge">Tuple2</code> will be converted to a <code class="highlighter-rouge">Vertex</code>, where the first field will be the vertex ID and the second field will be the vertex value:</li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">vertexTuples</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">readCsvFile</span><span class="o">(</span><span class="s">"path/to/vertex/input"</span><span class="o">).</span><span class="na">types</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">Long</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple3</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">edgeTuples</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">readCsvFile</span><span class="o">(</span><span class="s">"path/to/edge/input"</span><span class="o">).</span><span class="na">types</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">Double</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromTupleDataSet</span><span class="o">(</span><span class="n">vertexTuples</span><span class="o">,</span> <span class="n">edgeTuples</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span></code></pre></figure>

    <ul>
      <li>
        <p>from a CSV file of Edge data and an optional CSV file of Vertex data. In this case, Gelly will convert each row from the Edge CSV file to an <code class="highlighter-rouge">Edge</code>, where the first field will be the source ID, the second field will be the target ID and the third field (if present) will be the edge value. Equivalently, each row from the optional Vertex CSV file will be converted to a <code class="highlighter-rouge">Vertex</code>, where the first field will be the vertex ID and the second field (if present) will be the vertex value. In order to get a <code class="highlighter-rouge">Graph</code> from a <code class="highlighter-rouge">GraphCsvReader</code> one has to specify the types, using one of the following methods:</p>
      </li>
      <li><code class="highlighter-rouge">types(Class&lt;K&gt; vertexKey, Class&lt;VV&gt; vertexValue,Class&lt;EV&gt; edgeValue)</code>: both vertex and edge values are present.</li>
      <li><code class="highlighter-rouge">edgeTypes(Class&lt;K&gt; vertexKey, Class&lt;EV&gt; edgeValue)</code>: the Graph has edge values, but no vertex values.</li>
      <li><code class="highlighter-rouge">vertexTypes(Class&lt;K&gt; vertexKey, Class&lt;VV&gt; vertexValue)</code>: the Graph has vertex values, but no edge values.</li>
      <li><code class="highlighter-rouge">keyType(Class&lt;K&gt; vertexKey)</code>: the Graph has no vertex values and no edge values.</li>
    </ul>

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

<span class="c1">// create a Graph with String Vertex IDs, Long Vertex values and Double Edge values</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromCsvReader</span><span class="o">(</span><span class="s">"path/to/vertex/input"</span><span class="o">,</span> <span class="s">"path/to/edge/input"</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span>
					<span class="o">.</span><span class="na">types</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">Long</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">Double</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>


<span class="c1">// create a Graph with neither Vertex nor Edge values</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">&gt;</span> <span class="n">simpleGraph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromCsvReader</span><span class="o">(</span><span class="s">"path/to/edge/input"</span><span class="o">,</span> <span class="n">env</span><span class="o">).</span><span class="na">keyType</span><span class="o">(</span><span class="nc">Long</span><span class="o">.</span><span class="na">class</span><span class="o">);</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>

<span class="k">val</span> <span class="nv">vertexTuples</span> <span class="k">=</span> <span class="nv">env</span><span class="o">.</span><span class="py">readCsvFile</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Long</span><span class="o">](</span><span class="s">"path/to/vertex/input"</span><span class="o">)</span>

<span class="k">val</span> <span class="nv">edgeTuples</span> <span class="k">=</span> <span class="nv">env</span><span class="o">.</span><span class="py">readCsvFile</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">String</span>, <span class="kt">Double</span><span class="o">](</span><span class="s">"path/to/edge/input"</span><span class="o">)</span>

<span class="k">val</span> <span class="nv">graph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromTupleDataSet</span><span class="o">(</span><span class="n">vertexTuples</span><span class="o">,</span> <span class="n">edgeTuples</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span></code></pre></figure>

    <ul>
      <li>from a CSV file of Edge data and an optional CSV file of Vertex data.
In this case, Gelly will convert each row from the Edge CSV file to an <code class="highlighter-rouge">Edge</code>.
The first field of the each row will be the source ID, the second field will be the target ID and the third field (if present) will be the edge value.
If the edges have no associated value, set the edge value type parameter (3rd type argument) to <code class="highlighter-rouge">NullValue</code>.
You can also specify that the vertices are initialized with a vertex value.
If you provide a path to a CSV file via <code class="highlighter-rouge">pathVertices</code>, each row of this file will be converted to a <code class="highlighter-rouge">Vertex</code>.
The first field of each row will be the vertex ID and the second field will be the vertex value.
If you provide a vertex value initializer <code class="highlighter-rouge">MapFunction</code> via the <code class="highlighter-rouge">vertexValueInitializer</code> parameter, then this function is used to generate the vertex values.
The set of vertices will be created automatically from the edges input.
If the vertices have no associated value, set the vertex value type parameter (2nd type argument) to <code class="highlighter-rouge">NullValue</code>.
The vertices will then be automatically created from the edges input with vertex value of type <code class="highlighter-rouge">NullValue</code>.</li>
    </ul>

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>

<span class="c1">// create a Graph with String Vertex IDs, Long Vertex values and Double Edge values</span>
<span class="k">val</span> <span class="nv">graph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromCsvReader</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Long</span>, <span class="kt">Double</span><span class="o">](</span>
		<span class="n">pathVertices</span> <span class="k">=</span> <span class="s">"path/to/vertex/input"</span><span class="o">,</span>
		<span class="n">pathEdges</span> <span class="k">=</span> <span class="s">"path/to/edge/input"</span><span class="o">,</span>
		<span class="n">env</span> <span class="k">=</span> <span class="n">env</span><span class="o">)</span>


<span class="c1">// create a Graph with neither Vertex nor Edge values</span>
<span class="k">val</span> <span class="nv">simpleGraph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromCsvReader</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">NullValue</span>, <span class="kt">NullValue</span><span class="o">](</span>
		<span class="n">pathEdges</span> <span class="k">=</span> <span class="s">"path/to/edge/input"</span><span class="o">,</span>
		<span class="n">env</span> <span class="k">=</span> <span class="n">env</span><span class="o">)</span>

<span class="c1">// create a Graph with Double Vertex values generated by a vertex value initializer and no Edge values</span>
<span class="k">val</span> <span class="nv">simpleGraph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromCsvReader</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Double</span>, <span class="kt">NullValue</span><span class="o">](</span>
        <span class="n">pathEdges</span> <span class="k">=</span> <span class="s">"path/to/edge/input"</span><span class="o">,</span>
        <span class="n">vertexValueInitializer</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MapFunction</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Double</span><span class="o">]()</span> <span class="o">{</span>
            <span class="k">def</span> <span class="nf">map</span><span class="o">(</span><span class="n">id</span><span class="k">:</span> <span class="kt">Long</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="o">{</span>
                <span class="nv">id</span><span class="o">.</span><span class="py">toDouble</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="n">env</span> <span class="k">=</span> <span class="n">env</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<ul>
  <li>from a <code class="highlighter-rouge">Collection</code> of edges and an optional <code class="highlighter-rouge">Collection</code> of vertices:</li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">vertexList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">...</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">edgeList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">...</span>

<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromCollection</span><span class="o">(</span><span class="n">vertexList</span><span class="o">,</span> <span class="n">edgeList</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span></code></pre></figure>

    <p>If no vertex input is provided during Graph creation, Gelly will automatically produce the <code class="highlighter-rouge">Vertex</code> <code class="highlighter-rouge">DataSet</code> from the edge input. In this case, the created vertices will have no values. Alternatively, you can provide a <code class="highlighter-rouge">MapFunction</code> as an argument to the creation method, in order to initialize the <code class="highlighter-rouge">Vertex</code> values:</p>

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

<span class="c1">// initialize the vertex value to be equal to the vertex ID</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromCollection</span><span class="o">(</span><span class="n">edgeList</span><span class="o">,</span>
				<span class="k">new</span> <span class="nc">MapFunction</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;()</span> <span class="o">{</span>
					<span class="kd">public</span> <span class="nc">Long</span> <span class="nf">map</span><span class="o">(</span><span class="nc">Long</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
						<span class="k">return</span> <span class="n">value</span><span class="o">;</span>
					<span class="o">}</span>
				<span class="o">},</span> <span class="n">env</span><span class="o">);</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>

<span class="k">val</span> <span class="nv">vertexList</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(...)</span>

<span class="k">val</span> <span class="nv">edgeList</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(...)</span>

<span class="k">val</span> <span class="nv">graph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromCollection</span><span class="o">(</span><span class="n">vertexList</span><span class="o">,</span> <span class="n">edgeList</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span></code></pre></figure>

    <p>If no vertex input is provided during Graph creation, Gelly will automatically produce the <code class="highlighter-rouge">Vertex</code> <code class="highlighter-rouge">DataSet</code> from the edge input. In this case, the created vertices will have no values. Alternatively, you can provide a <code class="highlighter-rouge">MapFunction</code> as an argument to the creation method, in order to initialize the <code class="highlighter-rouge">Vertex</code> values:</p>

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">val</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span>

<span class="c1">// initialize the vertex value to be equal to the vertex ID</span>
<span class="n">val</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromCollection</span><span class="o">(</span><span class="n">edgeList</span><span class="o">,</span>
    <span class="k">new</span> <span class="nc">MapFunction</span><span class="o">[</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">]</span> <span class="o">{</span>
       <span class="n">def</span> <span class="nf">map</span><span class="o">(</span><span class="nl">id:</span> <span class="nc">Long</span><span class="o">):</span> <span class="nc">Long</span> <span class="o">=</span> <span class="n">id</span>
    <span class="o">},</span> <span class="n">env</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="graph-properties">Graph Properties</h2>

<p>Gelly includes the following methods for retrieving various Graph properties and metrics:</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// get the Vertex DataSet</span>
<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">&gt;&gt;</span> <span class="nf">getVertices</span><span class="o">()</span>

<span class="c1">// get the Edge DataSet</span>
<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;&gt;</span> <span class="nf">getEdges</span><span class="o">()</span>

<span class="c1">// get the IDs of the vertices as a DataSet</span>
<span class="nc">DataSet</span><span class="o">&lt;</span><span class="no">K</span><span class="o">&gt;</span> <span class="nf">getVertexIds</span><span class="o">()</span>

<span class="c1">// get the source-target pairs of the edge IDs as a DataSet</span>
<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">K</span><span class="o">&gt;&gt;</span> <span class="nf">getEdgeIds</span><span class="o">()</span>

<span class="c1">// get a DataSet of &lt;vertex ID, in-degree&gt; pairs for all vertices</span>
<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="nc">LongValue</span><span class="o">&gt;&gt;</span> <span class="nf">inDegrees</span><span class="o">()</span>

<span class="c1">// get a DataSet of &lt;vertex ID, out-degree&gt; pairs for all vertices</span>
<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="nc">LongValue</span><span class="o">&gt;&gt;</span> <span class="nf">outDegrees</span><span class="o">()</span>

<span class="c1">// get a DataSet of &lt;vertex ID, degree&gt; pairs for all vertices, where degree is the sum of in- and out- degrees</span>
<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="nc">LongValue</span><span class="o">&gt;&gt;</span> <span class="nf">getDegrees</span><span class="o">()</span>

<span class="c1">// get the number of vertices</span>
<span class="kt">long</span> <span class="nf">numberOfVertices</span><span class="o">()</span>

<span class="c1">// get the number of edges</span>
<span class="kt">long</span> <span class="nf">numberOfEdges</span><span class="o">()</span>

<span class="c1">// get a DataSet of Triplets&lt;srcVertex, trgVertex, edge&gt;</span>
<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Triplet</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;&gt;</span> <span class="nf">getTriplets</span><span class="o">()</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="c1">// get the Vertex DataSet</span>
<span class="n">getVertices</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">Vertex</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">VV</span><span class="o">]]</span>

<span class="c1">// get the Edge DataSet</span>
<span class="n">getEdges</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">Edge</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">EV</span><span class="o">]]</span>

<span class="c1">// get the IDs of the vertices as a DataSet</span>
<span class="n">getVertexIds</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">K</span><span class="o">]</span>

<span class="c1">// get the source-target pairs of the edge IDs as a DataSet</span>
<span class="n">getEdgeIds</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[(</span><span class="kt">K</span>, <span class="kt">K</span><span class="o">)]</span>

<span class="c1">// get a DataSet of &lt;vertex ID, in-degree&gt; pairs for all vertices</span>
<span class="n">inDegrees</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[(</span><span class="kt">K</span>, <span class="kt">LongValue</span><span class="o">)]</span>

<span class="c1">// get a DataSet of &lt;vertex ID, out-degree&gt; pairs for all vertices</span>
<span class="n">outDegrees</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[(</span><span class="kt">K</span>, <span class="kt">LongValue</span><span class="o">)]</span>

<span class="c1">// get a DataSet of &lt;vertex ID, degree&gt; pairs for all vertices, where degree is the sum of in- and out- degrees</span>
<span class="n">getDegrees</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[(</span><span class="kt">K</span>, <span class="kt">LongValue</span><span class="o">)]</span>

<span class="c1">// get the number of vertices</span>
<span class="n">numberOfVertices</span><span class="k">:</span> <span class="kt">Long</span>

<span class="c1">// get the number of edges</span>
<span class="n">numberOfEdges</span><span class="k">:</span> <span class="kt">Long</span>

<span class="c1">// get a DataSet of Triplets&lt;srcVertex, trgVertex, edge&gt;</span>
<span class="n">getTriplets</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[</span><span class="kt">Triplet</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">VV</span>, <span class="kt">EV</span><span class="o">]]</span></code></pre></figure>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="graph-transformations">Graph Transformations</h2>

<ul>
  <li><strong>Map</strong>: Gelly provides specialized methods for applying a map transformation on the vertex values or edge values. <code class="highlighter-rouge">mapVertices</code> and <code class="highlighter-rouge">mapEdges</code> return a new <code class="highlighter-rouge">Graph</code>, where the IDs of the vertices (or edges) remain unchanged, while the values are transformed according to the provided user-defined map function. The map functions also allow changing the type of the vertex or edge values.</li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromDataSet</span><span class="o">(</span><span class="n">vertices</span><span class="o">,</span> <span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span>

<span class="c1">// increment each vertex value by one</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">updatedGraph</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">mapVertices</span><span class="o">(</span>
				<span class="k">new</span> <span class="nc">MapFunction</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">Long</span><span class="o">&gt;()</span> <span class="o">{</span>
					<span class="kd">public</span> <span class="nc">Long</span> <span class="nf">map</span><span class="o">(</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
						<span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
					<span class="o">}</span>
				<span class="o">});</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>
<span class="k">val</span> <span class="nv">graph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromDataSet</span><span class="o">(</span><span class="n">vertices</span><span class="o">,</span> <span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span>

<span class="c1">// increment each vertex value by one</span>
<span class="k">val</span> <span class="nv">updatedGraph</span> <span class="k">=</span> <span class="nv">graph</span><span class="o">.</span><span class="py">mapVertices</span><span class="o">(</span><span class="n">v</span> <span class="k">=&gt;</span> <span class="nv">v</span><span class="o">.</span><span class="py">getValue</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<ul>
  <li><strong>Translate</strong>: Gelly provides specialized methods for translating the value and/or type of vertex and edge IDs (<code class="highlighter-rouge">translateGraphIDs</code>), vertex values (<code class="highlighter-rouge">translateVertexValues</code>), or edge values (<code class="highlighter-rouge">translateEdgeValues</code>). Translation is performed by the user-defined map function, several of which are provided in the <code class="highlighter-rouge">org.apache.flink.graph.asm.translate</code> package. The same <code class="highlighter-rouge">MapFunction</code> can be used for all the three translate methods.</li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromDataSet</span><span class="o">(</span><span class="n">vertices</span><span class="o">,</span> <span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span>

<span class="c1">// translate each vertex and edge ID to a String</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">updatedGraph</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">translateGraphIds</span><span class="o">(</span>
				<span class="k">new</span> <span class="nc">MapFunction</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;()</span> <span class="o">{</span>
					<span class="kd">public</span> <span class="nc">String</span> <span class="nf">map</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
						<span class="k">return</span> <span class="n">id</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
					<span class="o">}</span>
				<span class="o">});</span>

<span class="c1">// translate vertex IDs, edge IDs, vertex values, and edge values to LongValue</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">LongValue</span><span class="o">,</span> <span class="nc">LongValue</span><span class="o">,</span> <span class="nc">LongValue</span><span class="o">&gt;</span> <span class="n">updatedGraph</span> <span class="o">=</span> <span class="n">graph</span>
                <span class="o">.</span><span class="na">translateGraphIds</span><span class="o">(</span><span class="k">new</span> <span class="nc">LongToLongValue</span><span class="o">())</span>
                <span class="o">.</span><span class="na">translateVertexValues</span><span class="o">(</span><span class="k">new</span> <span class="nc">LongToLongValue</span><span class="o">())</span>
                <span class="o">.</span><span class="na">translateEdgeValues</span><span class="o">(</span><span class="k">new</span> <span class="nc">LongToLongValue</span><span class="o">())</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>
<span class="k">val</span> <span class="nv">graph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromDataSet</span><span class="o">(</span><span class="n">vertices</span><span class="o">,</span> <span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span>

<span class="c1">// translate each vertex and edge ID to a String</span>
<span class="k">val</span> <span class="nv">updatedGraph</span> <span class="k">=</span> <span class="nv">graph</span><span class="o">.</span><span class="py">translateGraphIds</span><span class="o">(</span><span class="n">id</span> <span class="k">=&gt;</span> <span class="nv">id</span><span class="o">.</span><span class="py">toString</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<ul>
  <li><strong>Filter</strong>: A filter transformation applies a user-defined filter function on the vertices or edges of the <code class="highlighter-rouge">Graph</code>. <code class="highlighter-rouge">filterOnEdges</code> will create a sub-graph of the original graph, keeping only the edges that satisfy the provided predicate. Note that the vertex dataset will not be modified. Respectively, <code class="highlighter-rouge">filterOnVertices</code> applies a filter on the vertices of the graph. Edges whose source and/or target do not satisfy the vertex predicate are removed from the resulting edge dataset. The <code class="highlighter-rouge">subgraph</code> method can be used to apply a filter function to the vertices and the edges at the same time.</li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">graph</span><span class="o">.</span><span class="na">subgraph</span><span class="o">(</span>
		<span class="k">new</span> <span class="nc">FilterFunction</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;()</span> <span class="o">{</span>
			   	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">vertex</span><span class="o">)</span> <span class="o">{</span>
					<span class="c1">// keep only vertices with positive values</span>
					<span class="k">return</span> <span class="o">(</span><span class="n">vertex</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">);</span>
			   <span class="o">}</span>
		   <span class="o">},</span>
		<span class="k">new</span> <span class="nc">FilterFunction</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;()</span> <span class="o">{</span>
				<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">edge</span><span class="o">)</span> <span class="o">{</span>
					<span class="c1">// keep only edges with negative values</span>
					<span class="k">return</span> <span class="o">(</span><span class="n">edge</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">);</span>
				<span class="o">}</span>
		<span class="o">})</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">graph</span><span class="k">:</span> <span class="kt">Graph</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span>, <span class="kt">Long</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="c1">// keep only vertices with positive values</span>
<span class="c1">// and only edges with negative values</span>
<span class="nv">graph</span><span class="o">.</span><span class="py">subgraph</span><span class="o">((</span><span class="n">vertex</span> <span class="k">=&gt;</span> <span class="nv">vertex</span><span class="o">.</span><span class="py">getValue</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">),</span> <span class="o">(</span><span class="n">edge</span> <span class="k">=&gt;</span> <span class="nv">edge</span><span class="o">.</span><span class="py">getValue</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">))</span></code></pre></figure>

  </div>
</div>

<p class="text-center">
    <img alt="Filter Transformations" width="80%" src="//ci.apache.org/projects/flink/flink-docs-release-1.12/fig/gelly-filter.png" />
</p>

<ul>
  <li><strong>Join</strong>: Gelly provides specialized methods for joining the vertex and edge datasets with other input datasets. <code class="highlighter-rouge">joinWithVertices</code> joins the vertices with a <code class="highlighter-rouge">Tuple2</code> input data set. The join is performed using the vertex ID and the first field of the <code class="highlighter-rouge">Tuple2</code> input as the join keys. The method returns a new <code class="highlighter-rouge">Graph</code> where the vertex values have been updated according to a provided user-defined transformation function.
Similarly, an input dataset can be joined with the edges, using one of three methods. <code class="highlighter-rouge">joinWithEdges</code> expects an input <code class="highlighter-rouge">DataSet</code> of <code class="highlighter-rouge">Tuple3</code> and joins on the composite key of both source and target vertex IDs. <code class="highlighter-rouge">joinWithEdgesOnSource</code> expects a <code class="highlighter-rouge">DataSet</code> of <code class="highlighter-rouge">Tuple2</code> and joins on the source key of the edges and the first attribute of the input dataset and <code class="highlighter-rouge">joinWithEdgesOnTarget</code> expects a <code class="highlighter-rouge">DataSet</code> of <code class="highlighter-rouge">Tuple2</code> and joins on the target key of the edges and the first attribute of the input dataset. All three methods apply a transformation function on the edge and the input data set values.
Note that if the input dataset contains a key multiple times, all Gelly join methods will only consider the first value encountered.</li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">network</span> <span class="o">=</span> <span class="o">...</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">LongValue</span><span class="o">&gt;&gt;</span> <span class="n">vertexOutDegrees</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="na">outDegrees</span><span class="o">();</span>

<span class="c1">// assign the transition probabilities as the edge weights</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">networkWithWeights</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="na">joinWithEdgesOnSource</span><span class="o">(</span><span class="n">vertexOutDegrees</span><span class="o">,</span>
				<span class="k">new</span> <span class="nc">VertexJoinFunction</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">,</span> <span class="nc">LongValue</span><span class="o">&gt;()</span> <span class="o">{</span>
					<span class="kd">public</span> <span class="nc">Double</span> <span class="nf">vertexJoin</span><span class="o">(</span><span class="nc">Double</span> <span class="n">vertexValue</span><span class="o">,</span> <span class="nc">LongValue</span> <span class="n">inputValue</span><span class="o">)</span> <span class="o">{</span>
						<span class="k">return</span> <span class="n">vertexValue</span> <span class="o">/</span> <span class="n">inputValue</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
					<span class="o">}</span>
				<span class="o">});</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">network</span><span class="k">:</span> <span class="kt">Graph</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Double</span>, <span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="nv">vertexOutDegrees</span><span class="k">:</span> <span class="kt">DataSet</span><span class="o">[(</span><span class="kt">Long</span>, <span class="kt">LongValue</span><span class="o">)]</span> <span class="k">=</span> <span class="nv">network</span><span class="o">.</span><span class="py">outDegrees</span>

<span class="c1">// assign the transition probabilities as the edge weights</span>
<span class="k">val</span> <span class="nv">networkWithWeights</span> <span class="k">=</span> <span class="nv">network</span><span class="o">.</span><span class="py">joinWithEdgesOnSource</span><span class="o">(</span><span class="n">vertexOutDegrees</span><span class="o">,</span> <span class="o">(</span><span class="n">v1</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">v2</span><span class="k">:</span> <span class="kt">LongValue</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">v1</span> <span class="o">/</span> <span class="nv">v2</span><span class="o">.</span><span class="py">getValue</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<ul>
  <li>
    <p><strong>Reverse</strong>: the <code class="highlighter-rouge">reverse()</code> method returns a new <code class="highlighter-rouge">Graph</code> where the direction of all edges has been reversed.</p>
  </li>
  <li>
    <p><strong>Undirected</strong>: In Gelly, a <code class="highlighter-rouge">Graph</code> is always directed. Undirected graphs can be represented by adding all opposite-direction edges to a graph. For this purpose, Gelly provides the <code class="highlighter-rouge">getUndirected()</code> method.</p>
  </li>
  <li>
    <p><strong>Union</strong>: Gelly’s <code class="highlighter-rouge">union()</code> method performs a union operation on the vertex and edge sets of the specified graph and the current graph. Duplicate vertices are removed from the resulting <code class="highlighter-rouge">Graph</code>, while if duplicate edges exist, these will be preserved.</p>
  </li>
</ul>

<p class="text-center">
    <img alt="Union Transformation" width="50%" src="//ci.apache.org/projects/flink/flink-docs-release-1.12/fig/gelly-union.png" />
</p>

<ul>
  <li>
    <p><strong>Difference</strong>: Gelly’s <code class="highlighter-rouge">difference()</code> method performs a difference on the vertex and edge sets of the current graph and the specified graph.</p>
  </li>
  <li>
    <p><strong>Intersect</strong>: Gelly’s <code class="highlighter-rouge">intersect()</code> method performs an intersect on the edge
 sets of the current graph and the specified graph. The result is a new <code class="highlighter-rouge">Graph</code> that contains all
 edges that exist in both input graphs. Two edges are considered equal, if they have the same source
 identifier, target identifier and edge value. Vertices in the resulting graph have no
 value. If vertex values are required, one can for example retrieve them from one of the input graphs using
 the <code class="highlighter-rouge">joinWithVertices()</code> method.
 Depending on the parameter <code class="highlighter-rouge">distinct</code>, equal edges are either contained once in the resulting
 <code class="highlighter-rouge">Graph</code> or as often as there are pairs of equal edges in the input graphs.</p>
  </li>
</ul>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

<span class="c1">// create first graph from edges {(1, 3, 12) (1, 3, 13), (1, 3, 13)}</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">edges1</span> <span class="o">=</span> <span class="o">...</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">graph1</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromCollection</span><span class="o">(</span><span class="n">edges1</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span>

<span class="c1">// create second graph from edges {(1, 3, 13)}</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">edges2</span> <span class="o">=</span> <span class="o">...</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">graph2</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromCollection</span><span class="o">(</span><span class="n">edges2</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span>

<span class="c1">// Using distinct = true results in {(1,3,13)}</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">intersect1</span> <span class="o">=</span> <span class="n">graph1</span><span class="o">.</span><span class="na">intersect</span><span class="o">(</span><span class="n">graph2</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

<span class="c1">// Using distinct = false results in {(1,3,13),(1,3,13)} as there is one edge pair</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">NullValue</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">intersect2</span> <span class="o">=</span> <span class="n">graph1</span><span class="o">.</span><span class="na">intersect</span><span class="o">(</span><span class="n">graph2</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>

<span class="c1">// create first graph from edges {(1, 3, 12) (1, 3, 13), (1, 3, 13)}</span>
<span class="k">val</span> <span class="nv">edges1</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Edge</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">]]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">val</span> <span class="nv">graph1</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromCollection</span><span class="o">(</span><span class="n">edges1</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span>

<span class="c1">// create second graph from edges {(1, 3, 13)}</span>
<span class="k">val</span> <span class="nv">edges2</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Edge</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">]]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">val</span> <span class="nv">graph2</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromCollection</span><span class="o">(</span><span class="n">edges2</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span>


<span class="c1">// Using distinct = true results in {(1,3,13)}</span>
<span class="k">val</span> <span class="nv">intersect1</span> <span class="k">=</span> <span class="nv">graph1</span><span class="o">.</span><span class="py">intersect</span><span class="o">(</span><span class="n">graph2</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>

<span class="c1">// Using distinct = false results in {(1,3,13),(1,3,13)} as there is one edge pair</span>
<span class="k">val</span> <span class="nv">intersect2</span> <span class="k">=</span> <span class="nv">graph1</span><span class="o">.</span><span class="py">intersect</span><span class="o">(</span><span class="n">graph2</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<p>-<a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="graph-mutations">Graph Mutations</h2>

<p>Gelly includes the following methods for adding and removing vertices and edges from an input <code class="highlighter-rouge">Graph</code>:</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// adds a Vertex to the Graph. If the Vertex already exists, it will not be added again.</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="nf">addVertex</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">&gt;</span> <span class="n">vertex</span><span class="o">)</span>

<span class="c1">// adds a list of vertices to the Graph. If the vertices already exist in the graph, they will not be added once more.</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="nf">addVertices</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">&gt;&gt;</span> <span class="n">verticesToAdd</span><span class="o">)</span>

<span class="c1">// adds an Edge to the Graph. If the source and target vertices do not exist in the graph, they will also be added.</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="nf">addEdge</span><span class="o">(</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">&gt;</span> <span class="n">source</span><span class="o">,</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">&gt;</span> <span class="n">target</span><span class="o">,</span> <span class="no">EV</span> <span class="n">edgeValue</span><span class="o">)</span>

<span class="c1">// adds a list of edges to the Graph. When adding an edge for a non-existing set of vertices, the edge is considered invalid and ignored.</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="nf">addEdges</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;&gt;</span> <span class="n">newEdges</span><span class="o">)</span>

<span class="c1">// removes the given Vertex and its edges from the Graph.</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="nf">removeVertex</span><span class="o">(</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">&gt;</span> <span class="n">vertex</span><span class="o">)</span>

<span class="c1">// removes the given list of vertices and their edges from the Graph</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="nf">removeVertices</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">&gt;&gt;</span> <span class="n">verticesToBeRemoved</span><span class="o">)</span>

<span class="c1">// removes *all* edges that match the given Edge from the Graph.</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="nf">removeEdge</span><span class="o">(</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="n">edge</span><span class="o">)</span>

<span class="c1">// removes *all* edges that match the edges in the given list</span>
<span class="nc">Graph</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">VV</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;</span> <span class="nf">removeEdges</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span> <span class="no">EV</span><span class="o">&gt;&gt;</span> <span class="n">edgesToBeRemoved</span><span class="o">)</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="c1">// adds a Vertex to the Graph. If the Vertex already exists, it will not be added again.</span>
<span class="nf">addVertex</span><span class="o">(</span><span class="n">vertex</span><span class="k">:</span> <span class="kt">Vertex</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">VV</span><span class="o">])</span>

<span class="c1">// adds a list of vertices to the Graph. If the vertices already exist in the graph, they will not be added once more.</span>
<span class="nf">addVertices</span><span class="o">(</span><span class="n">verticesToAdd</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Vertex</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">VV</span><span class="o">]])</span>

<span class="c1">// adds an Edge to the Graph. If the source and target vertices do not exist in the graph, they will also be added.</span>
<span class="nf">addEdge</span><span class="o">(</span><span class="n">source</span><span class="k">:</span> <span class="kt">Vertex</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">VV</span><span class="o">],</span> <span class="n">target</span><span class="k">:</span> <span class="kt">Vertex</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">VV</span><span class="o">],</span> <span class="n">edgeValue</span><span class="k">:</span> <span class="kt">EV</span><span class="o">)</span>

<span class="c1">// adds a list of edges to the Graph. When adding an edge for a non-existing set of vertices, the edge is considered invalid and ignored.</span>
<span class="nf">addEdges</span><span class="o">(</span><span class="n">edges</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Edge</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">EV</span><span class="o">]])</span>

<span class="c1">// removes the given Vertex and its edges from the Graph.</span>
<span class="nf">removeVertex</span><span class="o">(</span><span class="n">vertex</span><span class="k">:</span> <span class="kt">Vertex</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">VV</span><span class="o">])</span>

<span class="c1">// removes the given list of vertices and their edges from the Graph</span>
<span class="nf">removeVertices</span><span class="o">(</span><span class="n">verticesToBeRemoved</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Vertex</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">VV</span><span class="o">]])</span>

<span class="c1">// removes *all* edges that match the given Edge from the Graph.</span>
<span class="nf">removeEdge</span><span class="o">(</span><span class="n">edge</span><span class="k">:</span> <span class="kt">Edge</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">EV</span><span class="o">])</span>

<span class="c1">// removes *all* edges that match the edges in the given list</span>
<span class="nf">removeEdges</span><span class="o">(</span><span class="n">edgesToBeRemoved</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Edge</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">EV</span><span class="o">]])</span></code></pre></figure>

  </div>
</div>

<h2 id="neighborhood-methods">Neighborhood Methods</h2>

<p>Neighborhood methods allow vertices to perform an aggregation on their first-hop neighborhood.
<code class="highlighter-rouge">reduceOnEdges()</code> can be used to compute an aggregation on the values of the neighboring edges of a vertex and <code class="highlighter-rouge">reduceOnNeighbors()</code> can be used to compute an aggregation on the values of the neighboring vertices. These methods assume associative and commutative aggregations and exploit combiners internally, significantly improving performance.
The neighborhood scope is defined by the <code class="highlighter-rouge">EdgeDirection</code> parameter, which takes the values <code class="highlighter-rouge">IN</code>, <code class="highlighter-rouge">OUT</code> or <code class="highlighter-rouge">ALL</code>. <code class="highlighter-rouge">IN</code> will gather all in-coming edges (neighbors) of a vertex, <code class="highlighter-rouge">OUT</code> will gather all out-going edges (neighbors), while <code class="highlighter-rouge">ALL</code> will gather all edges (neighbors).</p>

<p>For example, assume that you want to select the minimum weight of all out-edges for each vertex in the following graph:</p>

<p class="text-center">
    <img alt="reduceOnEdges Example" width="50%" src="//ci.apache.org/projects/flink/flink-docs-release-1.12/fig/gelly-example-graph.png" />
</p>

<p>The following code will collect the out-edges for each vertex and apply the <code class="highlighter-rouge">SelectMinWeight()</code> user-defined function on each of the resulting neighborhoods:</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="o">...</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">minWeights</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">reduceOnEdges</span><span class="o">(</span><span class="k">new</span> <span class="nc">SelectMinWeight</span><span class="o">(),</span> <span class="nc">EdgeDirection</span><span class="o">.</span><span class="na">OUT</span><span class="o">);</span>

<span class="c1">// user-defined function to select the minimum weight</span>
<span class="kd">static</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">SelectMinWeight</span> <span class="kd">implements</span> <span class="nc">ReduceEdgesFunction</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="o">{</span>

		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="nc">Double</span> <span class="nf">reduceEdges</span><span class="o">(</span><span class="nc">Double</span> <span class="n">firstEdgeValue</span><span class="o">,</span> <span class="nc">Double</span> <span class="n">secondEdgeValue</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">firstEdgeValue</span><span class="o">,</span> <span class="n">secondEdgeValue</span><span class="o">);</span>
		<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">graph</span><span class="k">:</span> <span class="kt">Graph</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span>, <span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="nv">minWeights</span> <span class="k">=</span> <span class="nv">graph</span><span class="o">.</span><span class="py">reduceOnEdges</span><span class="o">(</span><span class="k">new</span> <span class="nc">SelectMinWeight</span><span class="o">,</span> <span class="nv">EdgeDirection</span><span class="o">.</span><span class="py">OUT</span><span class="o">)</span>

<span class="c1">// user-defined function to select the minimum weight</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">SelectMinWeight</span> <span class="k">extends</span> <span class="nc">ReduceEdgesFunction</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="o">{</span>
	<span class="k">override</span> <span class="k">def</span> <span class="nf">reduceEdges</span><span class="o">(</span><span class="n">firstEdgeValue</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">secondEdgeValue</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="o">{</span>
		<span class="nv">Math</span><span class="o">.</span><span class="py">min</span><span class="o">(</span><span class="n">firstEdgeValue</span><span class="o">,</span> <span class="n">secondEdgeValue</span><span class="o">)</span>
	<span class="o">}</span>
 <span class="o">}</span></code></pre></figure>

  </div>
</div>

<p class="text-center">
    <img alt="reduceOnEdges Example" width="50%" src="//ci.apache.org/projects/flink/flink-docs-release-1.12/fig/gelly-reduceOnEdges.png" />
</p>

<p>Similarly, assume that you would like to compute the sum of the values of all in-coming neighbors, for every vertex. The following code will collect the in-coming neighbors for each vertex and apply the <code class="highlighter-rouge">SumValues()</code> user-defined function on each neighborhood:</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="o">...</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">verticesWithSum</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">reduceOnNeighbors</span><span class="o">(</span><span class="k">new</span> <span class="nc">SumValues</span><span class="o">(),</span> <span class="nc">EdgeDirection</span><span class="o">.</span><span class="na">IN</span><span class="o">);</span>

<span class="c1">// user-defined function to sum the neighbor values</span>
<span class="kd">static</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">SumValues</span> <span class="kd">implements</span> <span class="nc">ReduceNeighborsFunction</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>

	    	<span class="nd">@Override</span>
	    	<span class="kd">public</span> <span class="nc">Long</span> <span class="nf">reduceNeighbors</span><span class="o">(</span><span class="nc">Long</span> <span class="n">firstNeighbor</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">secondNeighbor</span><span class="o">)</span> <span class="o">{</span>
		    	<span class="k">return</span> <span class="n">firstNeighbor</span> <span class="o">+</span> <span class="n">secondNeighbor</span><span class="o">;</span>
	  	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">graph</span><span class="k">:</span> <span class="kt">Graph</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span>, <span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="nv">verticesWithSum</span> <span class="k">=</span> <span class="nv">graph</span><span class="o">.</span><span class="py">reduceOnNeighbors</span><span class="o">(</span><span class="k">new</span> <span class="nc">SumValues</span><span class="o">,</span> <span class="nv">EdgeDirection</span><span class="o">.</span><span class="py">IN</span><span class="o">)</span>

<span class="c1">// user-defined function to sum the neighbor values</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">SumValues</span> <span class="k">extends</span> <span class="nc">ReduceNeighborsFunction</span><span class="o">[</span><span class="kt">Long</span><span class="o">]</span> <span class="o">{</span>
   	<span class="k">override</span> <span class="k">def</span> <span class="nf">reduceNeighbors</span><span class="o">(</span><span class="n">firstNeighbor</span><span class="k">:</span> <span class="kt">Long</span><span class="o">,</span> <span class="n">secondNeighbor</span><span class="k">:</span> <span class="kt">Long</span><span class="o">)</span><span class="k">:</span> <span class="kt">Long</span> <span class="o">=</span> <span class="o">{</span>
    	<span class="n">firstNeighbor</span> <span class="o">+</span> <span class="n">secondNeighbor</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

  </div>
</div>

<p class="text-center">
    <img alt="reduceOnNeighbors Example" width="70%" src="//ci.apache.org/projects/flink/flink-docs-release-1.12/fig/gelly-reduceOnNeighbors.png" />
</p>

<p>When the aggregation function is not associative and commutative or when it is desirable to return more than one values per vertex, one can use the more general
<code class="highlighter-rouge">groupReduceOnEdges()</code> and <code class="highlighter-rouge">groupReduceOnNeighbors()</code> methods.
These methods return zero, one or more values per vertex and provide access to the whole neighborhood.</p>

<p>For example, the following code will output all the vertex pairs which are connected with an edge having a weight of 0.5 or more:</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="o">...</span>

<span class="nc">DataSet</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;&gt;</span> <span class="n">vertexPairs</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">groupReduceOnNeighbors</span><span class="o">(</span><span class="k">new</span> <span class="nc">SelectLargeWeightNeighbors</span><span class="o">(),</span> <span class="nc">EdgeDirection</span><span class="o">.</span><span class="na">OUT</span><span class="o">);</span>

<span class="c1">// user-defined function to select the neighbors which have edges with weight &gt; 0.5</span>
<span class="kd">static</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">SelectLargeWeightNeighbors</span> <span class="kd">implements</span> <span class="nc">NeighborsFunctionWithVertexValue</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">,</span>
		<span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;&gt;</span> <span class="o">{</span>

		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">iterateNeighbors</span><span class="o">(</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">vertex</span><span class="o">,</span>
				<span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;,</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;&gt;</span> <span class="n">neighbors</span><span class="o">,</span>
				<span class="nc">Collector</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;&gt;</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>

			<span class="k">for</span> <span class="o">(</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;,</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">neighbor</span> <span class="o">:</span> <span class="n">neighbors</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">if</span> <span class="o">(</span><span class="n">neighbor</span><span class="o">.</span><span class="na">f0</span><span class="o">.</span><span class="na">f2</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">out</span><span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="k">new</span> <span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;(</span><span class="n">vertex</span><span class="o">,</span> <span class="n">neighbor</span><span class="o">.</span><span class="na">f1</span><span class="o">));</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">graph</span><span class="k">:</span> <span class="kt">Graph</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span>, <span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="nv">vertexPairs</span> <span class="k">=</span> <span class="nv">graph</span><span class="o">.</span><span class="py">groupReduceOnNeighbors</span><span class="o">(</span><span class="k">new</span> <span class="nc">SelectLargeWeightNeighbors</span><span class="o">,</span> <span class="nv">EdgeDirection</span><span class="o">.</span><span class="py">OUT</span><span class="o">)</span>

<span class="c1">// user-defined function to select the neighbors which have edges with weight &gt; 0.5</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">SelectLargeWeightNeighbors</span> <span class="k">extends</span> <span class="nc">NeighborsFunctionWithVertexValue</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span>, <span class="kt">Double</span>,
  <span class="o">(</span><span class="kt">Vertex</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">]</span>, <span class="kt">Vertex</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">])]</span> <span class="o">{</span>

	<span class="k">override</span> <span class="k">def</span> <span class="nf">iterateNeighbors</span><span class="o">(</span><span class="n">vertex</span><span class="k">:</span> <span class="kt">Vertex</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">],</span>
		<span class="n">neighbors</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[(</span><span class="kt">Edge</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Double</span><span class="o">]</span>, <span class="kt">Vertex</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">])],</span>
		<span class="n">out</span><span class="k">:</span> <span class="kt">Collector</span><span class="o">[(</span><span class="kt">Vertex</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">]</span>, <span class="kt">Vertex</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">])])</span> <span class="k">=</span> <span class="o">{</span>

			<span class="nf">for</span> <span class="o">(</span><span class="n">neighbor</span> <span class="k">&lt;-</span> <span class="n">neighbors</span><span class="o">)</span> <span class="o">{</span>
				<span class="nf">if</span> <span class="o">(</span><span class="nv">neighbor</span><span class="o">.</span><span class="py">_1</span><span class="o">.</span><span class="py">getValue</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="o">)</span> <span class="o">{</span>
					<span class="nv">out</span><span class="o">.</span><span class="py">collect</span><span class="o">(</span><span class="n">vertex</span><span class="o">,</span> <span class="nv">neighbor</span><span class="o">.</span><span class="py">_2</span><span class="o">)</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>
   <span class="o">}</span></code></pre></figure>

  </div>
</div>

<p>When the aggregation computation does not require access to the vertex value (for which the aggregation is performed), it is advised to use the more efficient <code class="highlighter-rouge">EdgesFunction</code> and <code class="highlighter-rouge">NeighborsFunction</code> for the user-defined functions. When access to the vertex value is required, one should use <code class="highlighter-rouge">EdgesFunctionWithVertexValue</code> and <code class="highlighter-rouge">NeighborsFunctionWithVertexValue</code> instead.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="graph-validation">Graph Validation</h2>

<p>Gelly provides a simple utility for performing validation checks on input graphs. Depending on the application context, a graph may or may not be valid according to certain criteria. For example, a user might need to validate whether their graph contains duplicate edges or whether its structure is bipartite. In order to validate a graph, one can define a custom <code class="highlighter-rouge">GraphValidator</code> and implement its <code class="highlighter-rouge">validate()</code> method. <code class="highlighter-rouge">InvalidVertexIdsValidator</code> is Gelly’s pre-defined validator. It checks that the edge set contains valid vertex IDs, i.e. that all edge IDs
also exist in the vertex IDs set.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">ExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>

<span class="c1">// create a list of vertices with IDs = {1, 2, 3, 4, 5}</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Vertex</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">vertices</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// create a list of edges with IDs = {(1, 2) (1, 3), (2, 4), (5, 6)}</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Edge</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">edges</span> <span class="o">=</span> <span class="o">...</span>

<span class="nc">Graph</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="nc">Graph</span><span class="o">.</span><span class="na">fromCollection</span><span class="o">(</span><span class="n">vertices</span><span class="o">,</span> <span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">);</span>

<span class="c1">// will return false: 6 is an invalid ID</span>
<span class="n">graph</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="k">new</span> <span class="nc">InvalidVertexIdsValidator</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;());</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">ExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>

<span class="c1">// create a list of vertices with IDs = {1, 2, 3, 4, 5}</span>
<span class="k">val</span> <span class="nv">vertices</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Vertex</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">]]</span> <span class="k">=</span> <span class="o">...</span>

<span class="c1">// create a list of edges with IDs = {(1, 2) (1, 3), (2, 4), (5, 6)}</span>
<span class="k">val</span> <span class="nv">edges</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Edge</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span><span class="o">]]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="nv">graph</span> <span class="k">=</span> <span class="nv">Graph</span><span class="o">.</span><span class="py">fromCollection</span><span class="o">(</span><span class="n">vertices</span><span class="o">,</span> <span class="n">edges</span><span class="o">,</span> <span class="n">env</span><span class="o">)</span>

<span class="c1">// will return false: 6 is an invalid ID</span>
<span class="nv">graph</span><span class="o">.</span><span class="py">validate</span><span class="o">(</span><span class="k">new</span> <span class="nc">InvalidVertexIdsValidator</span><span class="o">[</span><span class="kt">Long</span>, <span class="kt">Long</span>, <span class="kt">Long</span><span class="o">])</span></code></pre></figure>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>



<div class="footer">
  <a href="https://cwiki.apache.org/confluence/display/FLINK/Flink+Translation+Specifications" target="_blank">
    
      想参与贡献翻译？
    
  </a>
</div>


        </div>
      </div>
    </div><!-- /.container -->

    <!-- default code tab -->
    <script>var defaultCodeTab = "";</script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>

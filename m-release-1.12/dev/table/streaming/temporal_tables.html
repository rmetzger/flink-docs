<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.12 Documentation: Temporal Tables</title>
    <link rel="shortcut icon" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/favicon.ico" type="image/x-icon">
    <link rel="canonical" href="//ci.apache.org/projects/flink/flink-docs-stable/dev/table/streaming/temporal_tables.html">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/flink.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/syntax.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/css/codetabs.css">
    <link rel="stylesheet" href="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/font-awesome/css/font-awesome.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    

    <!-- Main content. -->
    <div class="container">
      
      <div class="row">
        <div class="col-lg-3" id="sidenavcol">
          <div class="sidenav-logo">
  <p><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/"><img class="bottom" alt="Apache Flink" src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/img/navbar-brand-logo.jpg"></a> v1.12</p>
</div>
<ul id="sidenav">
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/"><i class="fa fa-home title" aria-hidden="true"></i> Home</a></li><hr class="section-break"></hr>
<li><a href="#collapse-2" data-toggle="collapse"><i class="fa fa-rocket title appetizer" aria-hidden="true"></i> Try Flink<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-2"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/try-flink/local_installation.html">Local Installation</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/try-flink/datastream_api.html">Fraud Detection with the DataStream API</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/try-flink/table_api.html">Real Time Reporting with the Table API</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/try-flink/flink-operations-playground.html">Flink Operations Playground</a></li>
</ul></div></li>
<li><a href="#collapse-8" data-toggle="collapse"><i class="fa fa-hand-paper-o title appetizer" aria-hidden="true"></i> Learn Flink<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-8"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/learn-flink/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/learn-flink/datastream_api.html">Intro to the DataStream API</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/learn-flink/etl.html">Data Pipelines & ETL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/learn-flink/streaming_analytics.html">Streaming Analytics</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/learn-flink/event_driven.html">Event-driven Applications</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/learn-flink/fault_tolerance.html">Fault Tolerance</a></li>
</ul></div></li>
<li><a href="#collapse-15" data-toggle="collapse"><i class="fa fa-map-o title appetizer" aria-hidden="true"></i> Concepts<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-15"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/concepts/index.html">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/concepts/stateful-stream-processing.html">Stateful Stream Processing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/concepts/timely-stream-processing.html">Timely Stream Processing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/concepts/flink-architecture.html">Flink Architecture</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/concepts/glossary.html">Glossary</a></li>
</ul></div></li><hr class="section-break"></hr>
<li><a href="#collapse-21" data-toggle="collapse"class="active"><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development</a><div class="collapse in" id="collapse-21"><ul>
<li><a href="#collapse-22" data-toggle="collapse">DataStream API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-22"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/datastream_api.html">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/datastream_execution_mode.html">Execution Mode (Batch/Streaming)</a></li>
<li><a href="#collapse-24" data-toggle="collapse">Event Time<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-24"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/event_time.html">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/event_timestamps_watermarks.html">Generating Watermarks</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/event_timestamp_extractors.html">Builtin Watermark Generators</a></li>
</ul></div></li>
<li><a href="#collapse-28" data-toggle="collapse">State & Fault Tolerance<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-28"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/state/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/state/state.html">Working with State</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/state/broadcast_state.html">The Broadcast State Pattern</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/state/checkpointing.html">Checkpointing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/state/queryable_state.html">Queryable State</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/state/state_backends.html">State Backends</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/state/schema_evolution.html">State Schema Evolution</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/state/custom_serialization.html">Custom State Serialization</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/user_defined_functions.html">User-Defined Functions</a></li>
<li><a href="#collapse-38" data-toggle="collapse">Operators<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-38"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/operators/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/operators/windows.html">Windows</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/operators/joining.html">Joining</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/operators/process_function.html">Process Function</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/operators/asyncio.html">Async I/O</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/sources.html">Data Sources</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/side_output.html">Side Outputs</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/application_parameters.html">Handling Application Parameters</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/testing.html">Testing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/stream/experimental.html">Experimental Features</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/scala_api_extensions.html">Scala API Extensions</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/java_lambdas.html">Java Lambda Expressions</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/project-configuration.html">Project Configuration</a></li>
</ul></div></li>
<li><a href="#collapse-53" data-toggle="collapse">DataSet API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-53"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/batch/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/batch/dataset_transformations.html">Transformations</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/batch/iterations.html">Iterations</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/batch/zip_elements_guide.html">Zipping Elements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/batch/hadoop_compatibility.html">Hadoop Compatibility</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/local_execution.html">Local Execution</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/cluster_execution.html">Cluster Execution</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/batch/examples.html">Batch Examples</a></li>
</ul></div></li>
<li><a href="#collapse-62" data-toggle="collapse"class="active">Table API & SQL</a><div class="collapse in" id="collapse-62"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/common.html">Concepts & Common API</a></li>
<li><a href="#collapse-64" data-toggle="collapse"class="active">Streaming Concepts</a><div class="collapse in" id="collapse-64"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/dynamic_tables.html">Dynamic Tables</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/time_attributes.html">Time Attributes</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/joins.html">Joins in Continuous Queries</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/temporal_tables.html" class="active">Temporal Tables</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/match_recognize.html">Detecting Patterns</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/query_configuration.html">Query Configuration</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/types.html">Data Types</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/tableApi.html">Table API</a></li>
<li><a href="#collapse-74" data-toggle="collapse">SQL<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-74"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/queries.html">Queries</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/create.html">CREATE Statements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/drop.html">DROP Statements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/alter.html">ALTER Statements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/insert.html">INSERT Statement</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/hints.html">SQL Hints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/describe.html">DESCRIBE Statements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/explain.html">EXPLAIN Statements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/use.html">USE Statements</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/show.html">SHOW Statements</a></li>
</ul></div></li>
<li><a href="#collapse-86" data-toggle="collapse">Functions<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-86"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/functions/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/functions/systemFunctions.html">System (Built-in) Functions</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/functions/udfs.html">User-defined Functions</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/modules.html">Modules</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/catalogs.html">Catalogs</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sqlClient.html">SQL Client</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/config.html">Configuration</a></li>
<li><a href="#collapse-94" data-toggle="collapse">Performance Tuning<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-94"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/tuning/streaming_aggregation_optimization.html">Streaming Aggregation</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sourceSinks.html">User-defined Sources & Sinks</a></li>
</ul></div></li>
<li><a href="#collapse-99" data-toggle="collapse">Python API<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-99"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/installation.html">Installation</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table_api_tutorial.html">Table API Tutorial</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/datastream_tutorial.html">DataStream API Tutorial</a></li>
<li><a href="#collapse-103" data-toggle="collapse">Table API User's Guide<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-103"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/intro_to_table_api.html">Intro to the Python Table API</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/table_environment.html">TableEnvironment</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/operations.html">Operations</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/python_types.html">Data Types</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/built_in_functions.html">System (Built-in) Functions</a></li>
<li><a href="#collapse-109" data-toggle="collapse">User Defined Functions<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-109"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/udfs/python_udfs.html">General User-defined Functions</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/udfs/vectorized_python_udfs.html">Vectorized User-defined Functions</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/conversion_of_pandas.html">Conversions between PyFlink Table and Pandas DataFrame</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/dependency_management.html">Dependency Management</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/sql.html">SQL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/catalogs.html">Catalogs</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/metrics.html">Metrics</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/table-api-users-guide/python_table_api_connectors.html">Connectors</a></li>
</ul></div></li>
<li><a href="#collapse-120" data-toggle="collapse">DataStream API User's Guide<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-120"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/datastream-api-users-guide/data_types.html">Data Types</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/datastream-api-users-guide/operators.html">Operators</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/datastream-api-users-guide/dependency_management.html">Dependency Management</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/python_config.html">Configuration</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/environment_variables.html">Environment Variables</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/python/faq.html">FAQ</a></li>
</ul></div></li>
<li><a href="#collapse-129" data-toggle="collapse">Data Types & Serialization<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-129"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/types_serialization.html">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/custom_serializers.html">Custom Serializers</a></li>
</ul></div></li>
<li><a href="#collapse-132" data-toggle="collapse">Managing Execution<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-132"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/execution_configuration.html">Execution Configuration</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/packaging.html">Program Packaging</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/parallel.html">Parallel Execution</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/execution_plans.html">Execution Plans</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/task_failure_recovery.html">Task Failure Recovery</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/migration.html">API Migration Guides</a></li>
</ul></div></li>
<li><a href="#collapse-141" data-toggle="collapse"><i class="fa fa-book title maindish" aria-hidden="true"></i> Libraries<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-141"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/cep.html">Event Processing (CEP)</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/state_processor_api.html">State Processor API</a></li>
<li><a href="#collapse-144" data-toggle="collapse">Graphs: Gelly<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-144"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/gelly/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/gelly/graph_api.html">Graph API</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/gelly/iterative_graph_processing.html">Iterative Graph Processing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/gelly/library_methods.html">Library Methods</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/gelly/graph_algorithms.html">Graph Algorithms</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/gelly/graph_generators.html">Graph Generators</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/libs/gelly/bipartite_graph.html">Bipartite Graph</a></li>
</ul></div></li>
</ul></div></li>
<li><a href="#collapse-153" data-toggle="collapse"><i class="fa fa-random title maindish" aria-hidden="true"></i> Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-153"><ul>
<li><a href="#collapse-154" data-toggle="collapse">DataStream Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-154"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/guarantees.html">Fault Tolerance Guarantees</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/kafka.html">Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/cassandra.html">Cassandra</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/kinesis.html">Kinesis</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/elasticsearch.html">Elasticsearch</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/file_sink.html">File Sink</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/streamfile_sink.html">Streaming File Sink</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/rabbitmq.html">RabbitMQ</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/nifi.html">NiFi</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/pubsub.html">Google Cloud PubSub</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/twitter.html">Twitter</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/jdbc.html">JDBC</a></li>
</ul></div></li>
<li><a href="#collapse-168" data-toggle="collapse">Table & SQL Connectors<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-168"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/">Overview</a></li>
<li><a href="#collapse-169" data-toggle="collapse">Formats<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-169"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/csv.html">CSV</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/json.html">JSON</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/avro-confluent.html">Confluent Avro</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/avro.html">Avro</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/debezium.html">Debezium</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/canal.html">Canal</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/maxwell.html">Maxwell</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/parquet.html">Parquet</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/orc.html">Orc</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/formats/raw.html">Raw</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/kafka.html">Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/upsert-kafka.html">Upsert Kafka</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/kinesis.html">Kinesis</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/jdbc.html">JDBC</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/elasticsearch.html">Elasticsearch</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/filesystem.html">FileSystem</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/hbase.html">HBase</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/datagen.html">DataGen</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/print.html">Print</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/blackhole.html">BlackHole</a></li>
<li><a href="#collapse-191" data-toggle="collapse">Hive<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-191"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/hive/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/hive/hive_catalog.html">Hive Catalog</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/hive/hive_dialect.html">Hive Dialect</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/hive/hive_read_write.html">Hive Read & Write</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/hive/hive_functions.html">Hive Functions</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/downloads.html">Download</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/batch/connectors.html">DataSet Connectors</a></li>
</ul></div></li>
<li><a href="#collapse-201" data-toggle="collapse"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-201"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/">Overview</a></li>
<li><a href="#collapse-202" data-toggle="collapse">Resource Providers<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-202"><ul>
<li><a href="#collapse-203" data-toggle="collapse">Standalone<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-203"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/resource-providers/standalone/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/resource-providers/standalone/local.html">Local Cluster</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/resource-providers/standalone/docker.html">Docker</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/resource-providers/standalone/kubernetes.html">Kubernetes</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/resource-providers/native_kubernetes.html">Native Kubernetes</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/resource-providers/yarn.html">YARN</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/resource-providers/mesos.html">Mesos</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/config.html">Configuration</a></li>
<li><a href="#collapse-213" data-toggle="collapse">Memory Configuration<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-213"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/memory/mem_setup.html">Set up Flink's Process Memory</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/memory/mem_setup_tm.html">Set up TaskManager Memory</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/memory/mem_setup_jobmanager.html">Set up JobManager Memory</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/memory/mem_tuning.html">Memory tuning guide</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/memory/mem_trouble.html">Troubleshooting</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/memory/mem_migration.html">Migration Guide</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/cli.html">Command-Line Interface</a></li>
<li><a href="#collapse-222" data-toggle="collapse">File Systems<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-222"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/filesystems/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/filesystems/common.html">Common Configurations</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/filesystems/s3.html">Amazon S3</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/filesystems/oss.html">Aliyun OSS</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/filesystems/azure.html">Azure Blob Storage</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/filesystems/plugins.html">Plugins</a></li>
</ul></div></li>
<li><a href="#collapse-229" data-toggle="collapse">High Availability (HA)<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-229"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/ha/">Overview</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/ha/zookeeper_ha.html">ZooKeeper HA Services</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/ha/kubernetes_ha.html">Kubernetes HA Services</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/metric_reporters.html">Metric Reporters</a></li>
<li><a href="#collapse-234" data-toggle="collapse">Security<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-234"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/security/security-ssl.html">SSL Setup</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/security/security-kerberos.html">Kerberos</a></li>
</ul></div></li>
<li><a href="#collapse-238" data-toggle="collapse">REPLs<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-238"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/repls/python_shell.html">Python REPL</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/repls/scala_shell.html">Scala REPL</a></li>
</ul></div></li>
<li><a href="#collapse-242" data-toggle="collapse">Advanced<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-242"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/advanced/external_resources.html">External Resources</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/advanced/historyserver.html">History Server</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/advanced/logging.html">Logging</a></li>
</ul></div></li>
</ul></div></li>
<li><a href="#collapse-248" data-toggle="collapse"><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Operations<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-248"><ul>
<li><a href="#collapse-249" data-toggle="collapse">State & Fault Tolerance<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-249"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/state/checkpoints.html">Checkpoints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/state/savepoints.html">Savepoints</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/state/state_backends.html">State Backends</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/state/large_state_tuning.html">Tuning Checkpoints and Large State</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/metrics.html">Metrics</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/rest_api.html">REST API</a></li>
<li><a href="#collapse-257" data-toggle="collapse">Debugging<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-257"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/debugging/debugging_event_time.html">Debugging Windows & Event Time</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/debugging/debugging_classloading.html">Debugging Classloading</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/debugging/application_profiling.html">Application Profiling & Debugging</a></li>
</ul></div></li>
<li><a href="#collapse-262" data-toggle="collapse">Monitoring<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-262"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/monitoring/checkpoint_monitoring.html">Monitoring Checkpointing</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/monitoring/back_pressure.html">Monitoring Back Pressure</a></li>
</ul></div></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/upgrading.html">Upgrading Applications and Flink Versions</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/ops/production_ready.html">Production Readiness Checklist</a></li>
</ul></div></li><hr class="section-break"></hr>
<li><a href="#collapse-269" data-toggle="collapse"><i class="fa fa-cogs title dessert" aria-hidden="true"></i> Flink Development<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-269"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/flinkDev/ide_setup.html">Importing Flink into an IDE</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/flinkDev/building.html">Building Flink from Source</a></li>
</ul></div></li>
<li><a href="#collapse-273" data-toggle="collapse"><i class="fa fa-book title dessert" aria-hidden="true"></i> Internals<i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-273"><ul>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/internals/job_scheduling.html">Jobs and Scheduling</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/internals/task_lifecycle.html">Task Lifecycle</a></li>
<li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/internals/filesystems.html">File Systems</a></li>
</ul></div></li>
  <li class="divider"></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/java"><i class="fa fa-external-link title" aria-hidden="true"></i> Javadocs</a></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/scala/index.html#org.apache.flink.api.scala.package"><i class="fa fa-external-link title" aria-hidden="true"></i> Scaladocs</a></li>
  <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/api/python"><i class="fa fa-external-link title" aria-hidden="true"></i> Pythondocs</a></li>
  <li><a href="http://flink.apache.org"><i class="fa fa-external-link title" aria-hidden="true"></i> Project Page</a></li>
</ul>

<div class="sidenav-search-box">
  <form class="navbar-form" role="search" action="//ci.apache.org/projects/flink/flink-docs-release-1.12/search-results.html">
    <div class="form-group">
      <input type="text" class="form-control" size="16px" name="q" placeholder="Search">
    </div>
    <button type="submit" class="btn btn-default">Go</button>
  </form>
</div>

<div class="sidenav-versions">
  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Pick Docs Version<span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.11">v1.11</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.10">v1.10</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.9">v1.9</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.8">v1.8</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.7">v1.7</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.6">v1.6</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.5">v1.5</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.4">v1.4</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.3">v1.3</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.2">v1.2</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.1">v1.1</a></li>
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.0">v1.0</a></li>
    </ul>
  </div>
</div>

<div class="sidenav-languages"><!-- link to the Chinese home page when current is blog page -->
    <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/zh/dev/table/streaming/temporal_tables.html">
      <button type="submit" class="btn btn-default">中文版</button>
    </a>
</div>

        </div>
        <div class="col-lg-9 content" id="contentcol">

          

<ol class="breadcrumb">
  
    <li><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development</li>
  
    <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/">Table API & SQL</a></li>
  
    <li><a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/">Streaming Concepts</a></li>
  
    <li class="active">Temporal Tables</li>
</ol>

<h1>Temporal Tables</h1>




<p>A Temporal table is a table that evolves over time -  otherwise known in Flink as a <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/dynamic_tables.html">dynamic table</a>. Rows in a temporal table are associated with one or more temporal periods and all Flink tables are temporal(dynamic).</p>

<p>A temporal table contains one or more versioned table snapshots, it can be a changing history table which tracks the changes(e.g. database changelog, contains all snapshots) or a changing dimensioned table which materializes the changes(e.g. database table, contains the latest snapshot).</p>

<p><strong>Version</strong>: A temporal table can split into a set of versioned table snapshots, the version in table snapshots represents the valid life circle of rows, the start time and the end time of the valid period can be assigned by users. 
Temporal table can split to <code class="highlighter-rouge">versioned table</code> and <code class="highlighter-rouge">regular table</code> according to the table can tracks its history version or not.</p>

<p><strong>Versioned table</strong>: If the rows a in temporal table can track its history changes and visit its history versions, we call this a versioned table. Tables that comes from a database changelog can be defined as a versioned table.</p>

<p><strong>Regular table</strong>: If the row in temporal table can only track and visit its latest version，we call this kind of temporal table as regular table. Tables that comes from a database or HBase can be defined as a regular table.</p>

<ul id="markdown-toc">
  <li><a href="#motivation" id="markdown-toc-motivation">Motivation</a>    <ul>
      <li><a href="#correlate-with-a-versioned-table" id="markdown-toc-correlate-with-a-versioned-table">Correlate with a versioned table</a></li>
      <li><a href="#correlate-with-a-regular-table" id="markdown-toc-correlate-with-a-regular-table">Correlate with a regular table</a></li>
    </ul>
  </li>
  <li><a href="#temporal-table" id="markdown-toc-temporal-table">Temporal Table</a>    <ul>
      <li><a href="#defining-versioned-table" id="markdown-toc-defining-versioned-table">Defining Versioned Table</a></li>
      <li><a href="#defining-versioned-view" id="markdown-toc-defining-versioned-view">Defining Versioned View</a></li>
      <li><a href="#defining-regular-table" id="markdown-toc-defining-regular-table">Defining Regular Table</a></li>
    </ul>
  </li>
  <li><a href="#temporal-table-function" id="markdown-toc-temporal-table-function">Temporal Table Function</a>    <ul>
      <li><a href="#defining-temporal-table-function" id="markdown-toc-defining-temporal-table-function">Defining Temporal Table Function</a></li>
    </ul>
  </li>
</ul>

<h2 id="motivation">Motivation</h2>

<h3 id="correlate-with-a-versioned-table">Correlate with a versioned table</h3>
<p>Given a scenario the order stream correlates the dimension table product, the table <code class="highlighter-rouge">orders</code> comes from kafka which contains the real time orders, the table <code class="highlighter-rouge">product_changelog</code> comes from the changelog of the database table <code class="highlighter-rouge">products</code>,
 the product price in table <code class="highlighter-rouge">products</code> is changing over time.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">product_changelog</span><span class="p">;</span>

<span class="p">(</span><span class="n">changelog</span> <span class="n">kind</span><span class="p">)</span>  <span class="n">update_time</span>  <span class="n">product_id</span> <span class="n">product_name</span> <span class="n">price</span>
<span class="o">=================</span> <span class="o">===========</span>  <span class="o">==========</span> <span class="o">============</span> <span class="o">=====</span> 
<span class="o">+</span><span class="p">(</span><span class="k">INSERT</span><span class="p">)</span>         <span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_001</span>      <span class="n">scooter</span>      <span class="mi">11</span><span class="p">.</span><span class="mi">11</span>
<span class="o">+</span><span class="p">(</span><span class="k">INSERT</span><span class="p">)</span>         <span class="mi">00</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_002</span>      <span class="n">basketball</span>   <span class="mi">23</span><span class="p">.</span><span class="mi">11</span>
<span class="o">-</span><span class="p">(</span><span class="n">UPDATE_BEFORE</span><span class="p">)</span>  <span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_001</span>      <span class="n">scooter</span>      <span class="mi">11</span><span class="p">.</span><span class="mi">11</span>
<span class="o">+</span><span class="p">(</span><span class="n">UPDATE_AFTER</span><span class="p">)</span>   <span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_001</span>      <span class="n">scooter</span>      <span class="mi">12</span><span class="p">.</span><span class="mi">99</span>
<span class="o">-</span><span class="p">(</span><span class="n">UPDATE_BEFORE</span><span class="p">)</span>  <span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_002</span>      <span class="n">basketball</span>   <span class="mi">23</span><span class="p">.</span><span class="mi">11</span> 
<span class="o">+</span><span class="p">(</span><span class="n">UPDATE_AFTER</span><span class="p">)</span>   <span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_002</span>      <span class="n">basketball</span>   <span class="mi">19</span><span class="p">.</span><span class="mi">99</span>
<span class="o">-</span><span class="p">(</span><span class="k">DELETE</span><span class="p">)</span>         <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_001</span>      <span class="n">scooter</span>      <span class="mi">12</span><span class="p">.</span><span class="mi">99</span> </code></pre></figure>

<p>The table <code class="highlighter-rouge">product_changelog</code> represents an ever growing changelog of database table <code class="highlighter-rouge">products</code>,  for example, the initial price of product <code class="highlighter-rouge">scooter</code> is <code class="highlighter-rouge">11.11</code> at <code class="highlighter-rouge">00:01:00</code>, and the price increases to <code class="highlighter-rouge">12.99</code> at <code class="highlighter-rouge">12:00:00</code>,
 the product item is deleted from the table <code class="highlighter-rouge">products</code> at <code class="highlighter-rouge">18:00:00</code>.</p>

<p>Given that we would like to output the version of <code class="highlighter-rouge">product_changelog</code> table of the time <code class="highlighter-rouge">10:00:00</code>, the following table shows the result.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">update_time</span>  <span class="n">product_id</span> <span class="n">product_name</span> <span class="n">price</span>
<span class="o">===========</span>  <span class="o">==========</span> <span class="o">============</span> <span class="o">=====</span> 
<span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_001</span>      <span class="n">scooter</span>      <span class="mi">11</span><span class="p">.</span><span class="mi">11</span>
<span class="mi">00</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_002</span>      <span class="n">basketball</span>   <span class="mi">23</span><span class="p">.</span><span class="mi">11</span></code></pre></figure>

<p>Given that we would like to output the version of <code class="highlighter-rouge">product_changelog</code> table of the time <code class="highlighter-rouge">13:00:00</code>, the following table shows the result.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">update_time</span>  <span class="n">product_id</span> <span class="n">product_name</span> <span class="n">price</span>
<span class="o">===========</span>  <span class="o">==========</span> <span class="o">============</span> <span class="o">=====</span> 
<span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_001</span>      <span class="n">scooter</span>      <span class="mi">12</span><span class="p">.</span><span class="mi">99</span>
<span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>     <span class="n">p_002</span>      <span class="n">basketball</span>   <span class="mi">19</span><span class="p">.</span><span class="mi">99</span></code></pre></figure>

<p>In above example, the specific version of the table is tracked by <code class="highlighter-rouge">update_time</code> and <code class="highlighter-rouge">product_id</code>,  the <code class="highlighter-rouge">product_id</code> would be a primary key for <code class="highlighter-rouge">product_changelog</code> table and <code class="highlighter-rouge">update_time</code> would be the event time.</p>

<p>In Flink, this is represented by a <a href="#defining-versioned-table"><em>versioned table</em></a>.</p>

<h3 id="correlate-with-a-regular-table">Correlate with a regular table</h3>

<p>On the other hand, some use cases require to join a regular table which is an external database table.</p>

<p>Let’s assume that <code class="highlighter-rouge">LatestRates</code> is a table (e.g. stored in HBase) which is materialized with the latest rates. The <code class="highlighter-rouge">LatestRates</code> always represents the latest content of hbase table <code class="highlighter-rouge">rates</code>.</p>

<p>Then the content of <code class="highlighter-rouge">LatestRates</code> table when we query at time <code class="highlighter-rouge">10:15:00</code> is:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">00</span> <span class="o">&gt;</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">LatestRates</span><span class="p">;</span>

<span class="n">currency</span>  <span class="n">rate</span>
<span class="o">=========</span> <span class="o">====</span>
<span class="n">US</span> <span class="n">Dollar</span> <span class="mi">102</span>
<span class="n">Euro</span>      <span class="mi">114</span>
<span class="n">Yen</span>       <span class="mi">1</span></code></pre></figure>

<p>Then the content of <code class="highlighter-rouge">LatestRates</code> table when we query at time <code class="highlighter-rouge">11:00:00</code> is:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="mi">11</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">&gt;</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">LatestRates</span><span class="p">;</span>

<span class="n">currency</span>  <span class="n">rate</span>
<span class="o">=========</span> <span class="o">====</span>
<span class="n">US</span> <span class="n">Dollar</span> <span class="mi">102</span>
<span class="n">Euro</span>      <span class="mi">116</span>
<span class="n">Yen</span>       <span class="mi">1</span></code></pre></figure>

<p>In Flink, this is represented by a <a href="#defining-regular-table"><em>regular Table</em></a>.</p>

<h2 id="temporal-table">Temporal Table</h2>
<p><span class="label label-danger">Attention</span> This is only supported in Blink planner.</p>

<p>Flink uses primary key constraint and event time to define both versioned table and versioned view.</p>

<h3 id="defining-versioned-table">Defining Versioned Table</h3>
<p>The table is a versioned table in Flink only is the table contains primary key constraint and event time.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- Define a versioned table</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">product_changelog</span> <span class="p">(</span>
  <span class="n">product_id</span> <span class="n">STRING</span><span class="p">,</span>
  <span class="n">product_name</span> <span class="n">STRING</span><span class="p">,</span>
  <span class="n">product_price</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
  <span class="n">update_time</span> <span class="nb">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="n">METADATA</span> <span class="k">FROM</span> <span class="s1">'value.source.timestamp'</span> <span class="n">VIRTUAL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">product_id</span><span class="p">)</span> <span class="k">NOT</span> <span class="n">ENFORCED</span><span class="p">,</span>      <span class="c1">-- (1) defines the primary key constraint</span>
  <span class="n">WATERMARK</span> <span class="k">FOR</span> <span class="n">update_time</span> <span class="k">AS</span> <span class="n">update_time</span>   <span class="c1">-- (2) defines the event time by watermark                               </span>
<span class="p">)</span> <span class="k">WITH</span> <span class="p">(</span>
  <span class="s1">'connector'</span> <span class="o">=</span> <span class="s1">'kafka'</span><span class="p">,</span>
  <span class="s1">'topic'</span> <span class="o">=</span> <span class="s1">'products'</span><span class="p">,</span>
  <span class="s1">'scan.startup.mode'</span> <span class="o">=</span> <span class="s1">'earliest-offset'</span><span class="p">,</span>
  <span class="s1">'properties.bootstrap.servers'</span> <span class="o">=</span> <span class="s1">'localhost:9092'</span><span class="p">,</span>
  <span class="s1">'value.format'</span> <span class="o">=</span> <span class="s1">'debezium-json'</span>
<span class="p">);</span></code></pre></figure>

<p>Line <code class="highlighter-rouge">(1)</code> defines the primary key constraint for table <code class="highlighter-rouge">product_changelog</code>, Line <code class="highlighter-rouge">(2)</code> defines the <code class="highlighter-rouge">update_time</code> as event time for table <code class="highlighter-rouge">product_changelog</code>,
thus table <code class="highlighter-rouge">product_changelog</code> is a versioned table.</p>

<p><strong>Note</strong>: The grammar <code class="highlighter-rouge">METADATA FROM 'value.source.timestamp' VIRTUAL</code> means extract the database
operation execution time for every changelog, it’s strongly recommended defines the database operation execution time 
as event time rather than ingestion-time or time in the record, otherwise the version extract from the changelog may
mismatch with the version in database.</p>

<h3 id="defining-versioned-view">Defining Versioned View</h3>

<p>Flink also supports defining versioned view only if the view contains unique key constraint and event time.</p>

<p>Let’s assume that we have the following table <code class="highlighter-rouge">RatesHistory</code>:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- Define an append-only table</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">RatesHistory</span> <span class="p">(</span>
    <span class="n">currency_time</span> <span class="nb">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="n">currency</span> <span class="n">STRING</span><span class="p">,</span>
    <span class="n">rate</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="n">WATERMARK</span> <span class="k">FOR</span> <span class="n">currency_time</span> <span class="k">AS</span> <span class="n">currency_time</span>   <span class="c1">-- defines the event time</span>
<span class="p">)</span> <span class="k">WITH</span> <span class="p">(</span>
  <span class="s1">'connector'</span> <span class="o">=</span> <span class="s1">'kafka'</span><span class="p">,</span>
  <span class="s1">'topic'</span> <span class="o">=</span> <span class="s1">'rates'</span><span class="p">,</span>
  <span class="s1">'scan.startup.mode'</span> <span class="o">=</span> <span class="s1">'earliest-offset'</span><span class="p">,</span>
  <span class="s1">'properties.bootstrap.servers'</span> <span class="o">=</span> <span class="s1">'localhost:9092'</span><span class="p">,</span>
  <span class="s1">'format'</span> <span class="o">=</span> <span class="s1">'json'</span>                                <span class="c1">-- this is an append only source</span>
<span class="p">)</span></code></pre></figure>

<p>Table <code class="highlighter-rouge">RatesHistory</code> represents an ever growing append-only table of currency exchange rates with respect to 
Yen (which has a rate of 1). For example, the exchange rate for the period from 09:00 to 10:45 of Euro to Yen was 114.
From 10:45 to 11:15 it was 116.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">RatesHistory</span><span class="p">;</span>

<span class="n">currency_time</span> <span class="n">currency</span>  <span class="n">rate</span>
<span class="o">=============</span> <span class="o">=========</span> <span class="o">====</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">US</span> <span class="n">Dollar</span> <span class="mi">102</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Euro</span>      <span class="mi">114</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Yen</span>       <span class="mi">1</span>
<span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Euro</span>      <span class="mi">116</span>
<span class="mi">11</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Euro</span>      <span class="mi">119</span>
<span class="mi">11</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Pounds</span>    <span class="mi">108</span></code></pre></figure>

<p>To define a versioned table on <code class="highlighter-rouge">RatesHistory</code>, Flink supports defining a versioned view 
by <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/queries.html#deduplication">deduplication query</a> which produces an ordered changelog
stream with an inferred primary key(<code class="highlighter-rouge">currency</code>) and event time(<code class="highlighter-rouge">currency_time</code>).</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- Define a versioned view</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">versioned_rates</span> <span class="k">AS</span>              
<span class="k">SELECT</span> <span class="n">currency</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">currency_time</span>            <span class="c1">-- (1) `currency_time` keeps the event time</span>
  <span class="k">FROM</span> <span class="p">(</span>
      <span class="k">SELECT</span> <span class="o">*</span><span class="p">,</span>
      <span class="n">ROW_NUMBER</span><span class="p">()</span> <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">currency</span>  <span class="c1">-- (2) the inferred unique key `currency` can be a primary key</span>
         <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">currency_time</span> <span class="k">DESC</span><span class="p">)</span> <span class="k">AS</span> <span class="n">rowNum</span> 
      <span class="k">FROM</span> <span class="n">RatesHistory</span><span class="p">)</span>
<span class="k">WHERE</span> <span class="n">rowNum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> 

<span class="c1">-- the view `versioned_rates` will produce changelog as the following.</span>
<span class="p">(</span><span class="n">changelog</span> <span class="n">kind</span><span class="p">)</span> <span class="n">currency_time</span> <span class="n">currency</span>   <span class="n">rate</span>
<span class="o">================</span> <span class="o">=============</span> <span class="o">=========</span>  <span class="o">====</span>
<span class="o">+</span><span class="p">(</span><span class="k">INSERT</span><span class="p">)</span>        <span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">US</span> <span class="n">Dollar</span>  <span class="mi">102</span>
<span class="o">+</span><span class="p">(</span><span class="k">INSERT</span><span class="p">)</span>        <span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Euro</span>       <span class="mi">114</span>
<span class="o">+</span><span class="p">(</span><span class="k">INSERT</span><span class="p">)</span>        <span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Yen</span>        <span class="mi">1</span>
<span class="o">+</span><span class="p">(</span><span class="n">UPDATE_AFTER</span><span class="p">)</span>  <span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Euro</span>       <span class="mi">116</span>
<span class="o">+</span><span class="p">(</span><span class="n">UPDATE_AFTER</span><span class="p">)</span>  <span class="mi">11</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Euro</span>       <span class="mi">119</span>
<span class="o">+</span><span class="p">(</span><span class="k">INSERT</span><span class="p">)</span>        <span class="mi">11</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Pounds</span>     <span class="mi">108</span></code></pre></figure>

<p>Line <code class="highlighter-rouge">(1)</code> defines the <code class="highlighter-rouge">currency_time</code> as event time for view <code class="highlighter-rouge">versioned_rates</code>， Line <code class="highlighter-rouge">(2)</code> defines the primary key constraint
for view <code class="highlighter-rouge">versioned_rates</code>, thus view <code class="highlighter-rouge">versioned_rates</code> is a versioned view.</p>

<p>The deduplication query in view will be optimized in Flink and produce changelog effectively, the produced changelog keep primary key and event times.</p>

<p>Given that we would like to output the version of <code class="highlighter-rouge">versioned_rates</code> view of the time <code class="highlighter-rouge">11:00:00</code>, the following table shows the result:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">currency_time</span> <span class="n">currency</span>   <span class="n">rate</span>  
<span class="o">=============</span> <span class="o">==========</span> <span class="o">====</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">US</span> <span class="n">Dollar</span>  <span class="mi">102</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Yen</span>        <span class="mi">1</span>
<span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Euro</span>       <span class="mi">116</span></code></pre></figure>

<p>Given that we would like to output the version of <code class="highlighter-rouge">versioned_rates</code> view of the time <code class="highlighter-rouge">12:00:00</code>, the following table shows the result:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">currency_time</span> <span class="n">currency</span>   <span class="n">rate</span>  
<span class="o">=============</span> <span class="o">==========</span> <span class="o">====</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">US</span> <span class="n">Dollar</span>  <span class="mi">102</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Yen</span>        <span class="mi">1</span>
<span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Euro</span>       <span class="mi">119</span>
<span class="mi">11</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">00</span>      <span class="n">Pounds</span>     <span class="mi">108</span></code></pre></figure>

<h3 id="defining-regular-table">Defining Regular Table</h3>

<p>Regular table definition is same with Flink table DDL, see also the page about <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/create.html#create-table">create table</a> for more information about how to create a regular table.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- Define an HBase table with DDL, then we can use it as a temporal table in sql</span>
<span class="c1">-- Column 'currency' is the rowKey in HBase table</span>
 <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">LatestRates</span> <span class="p">(</span>   
     <span class="n">currency</span> <span class="n">STRING</span><span class="p">,</span>   
     <span class="n">fam1</span> <span class="k">ROW</span><span class="o">&lt;</span><span class="n">rate</span> <span class="nb">DOUBLE</span><span class="o">&gt;</span>   
 <span class="p">)</span> <span class="k">WITH</span> <span class="p">(</span>   
    <span class="s1">'connector'</span> <span class="o">=</span> <span class="s1">'hbase-1.4'</span><span class="p">,</span>   
    <span class="s1">'table-name'</span> <span class="o">=</span> <span class="s1">'rates'</span><span class="p">,</span>   
    <span class="s1">'zookeeper.quorum'</span> <span class="o">=</span> <span class="s1">'localhost:2181'</span>   
 <span class="p">);</span></code></pre></figure>

<p><span class="label label-danger">Attention</span>
Arbitrary table can use as temporal table in processing-time temporal join theoretically, but currently the supported tale is the 
table backed by a <code class="highlighter-rouge">LookupableTableSource</code>. A <code class="highlighter-rouge">LookupableTableSource</code> can only be used for processing-time temporal join as a temporal table.</p>

<p>The table defines with <code class="highlighter-rouge">LookupableTableSource</code> means the table must has lookup ability to look up an external storage system 
by one or more keys during runtime. The current supported regular table in processing-time temporal join includes 
<a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/jdbc.html">JDBC</a>, <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/hbase.html">HBase</a> 
and <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/connectors/hive/hive_read_write.html#temporal-table-join">Hive</a>.</p>

<p>See also the page <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sourceSinks.html#lookup-table-source">LookupableTableSource</a> for more information.</p>

<p>Using arbitrary table as temporal table in processing time temporal table join will be supported in the near future.</p>

<h2 id="temporal-table-function">Temporal Table Function</h2>
<p>The temporal table function is a legacy way to define a temporal table and correlate the temporal table content. In order to access the data in a temporal table,  now we can use
temporal table DDL to define a temporal table and use <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/joins.html#temporal-joins">temporal table join</a> to correlate the temporal table.</p>

<p>The main difference between Temporal Table DDL and Temporal Table Function are the temporal table DDL can directly use in pure SQL but temporal table function can not; the temporal table DDL support defines versioned table from changelog stream and append-only stream but temporal table function only supports append-only stream.</p>

<p>In order to access the data in a temporal table, one must pass a <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/time_attributes.html">time attribute</a> that determines the version of the table that will be returned.
Flink uses the SQL syntax of <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/functions/udfs.html#table-functions">table functions</a> to provide a way to express it.</p>

<p>Once defined, a <em>Temporal Table Function</em> takes a single time argument <code class="highlighter-rouge">timeAttribute</code> and returns a set of rows.
This set contains the latest versions of the rows for all of the existing primary keys with respect to the given time attribute.</p>

<p>Assuming that we defined a temporal table function <code class="highlighter-rouge">Rates(timeAttribute)</code> based on <code class="highlighter-rouge">RatesHistory</code> table, we could query such a function in the following way:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Rates</span><span class="p">(</span><span class="s1">'10:15:00'</span><span class="p">);</span>

<span class="n">rowtime</span>  <span class="n">currency</span>  <span class="n">rate</span>
<span class="o">=======</span>  <span class="o">=========</span> <span class="o">====</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">US</span> <span class="n">Dollar</span> <span class="mi">102</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">Euro</span>      <span class="mi">114</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">Yen</span>       <span class="mi">1</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Rates</span><span class="p">(</span><span class="s1">'11:00:00'</span><span class="p">);</span>

<span class="n">rowtime</span>  <span class="n">currency</span>  <span class="n">rate</span>
<span class="o">========</span> <span class="o">=========</span> <span class="o">====</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">US</span> <span class="n">Dollar</span> <span class="mi">102</span>
<span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">00</span> <span class="n">Euro</span>      <span class="mi">116</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">Yen</span>       <span class="mi">1</span></code></pre></figure>

<p>Each query to <code class="highlighter-rouge">Rates(timeAttribute)</code> would return the state of the <code class="highlighter-rouge">Rates</code> for the given <code class="highlighter-rouge">timeAttribute</code>.</p>

<p><strong>Note</strong>: Currently, Flink doesn’t support directly querying the temporal table functions with a constant time attribute parameter. The above example was used to provide an intuition about what the function <code class="highlighter-rouge">Rates(timeAttribute)</code> returns.</p>

<p>See also the page about <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/streaming/joins.html">joins for continuous queries</a> for more information about how to join with a temporal table.</p>

<h3 id="defining-temporal-table-function">Defining Temporal Table Function</h3>

<p>The following code snippet illustrates how to create a temporal table by temporal table function from an append-only table.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.apache.flink.table.functions.TemporalTableFunction</span><span class="o">;</span>
<span class="o">(...)</span>

<span class="c1">// Get the stream and table environments.</span>
<span class="nc">StreamExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">StreamExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>
<span class="nc">StreamTableEnvironment</span> <span class="n">tEnv</span> <span class="o">=</span> <span class="nc">StreamTableEnvironment</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">env</span><span class="o">);</span>

<span class="c1">// Provide a static data set of the rates history table.</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">ratesHistoryData</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="n">ratesHistoryData</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Tuple2</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"US Dollar"</span><span class="o">,</span> <span class="mi">102L</span><span class="o">));</span>
<span class="n">ratesHistoryData</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Tuple2</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Euro"</span><span class="o">,</span> <span class="mi">114L</span><span class="o">));</span>
<span class="n">ratesHistoryData</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Tuple2</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Yen"</span><span class="o">,</span> <span class="mi">1L</span><span class="o">));</span>
<span class="n">ratesHistoryData</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Tuple2</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Euro"</span><span class="o">,</span> <span class="mi">116L</span><span class="o">));</span>
<span class="n">ratesHistoryData</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Tuple2</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Euro"</span><span class="o">,</span> <span class="mi">119L</span><span class="o">));</span>

<span class="c1">// Create and register an example table using above data set.</span>
<span class="c1">// In the real setup, you should replace this with your own table.</span>
<span class="nc">DataStream</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">ratesHistoryStream</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">fromCollection</span><span class="o">(</span><span class="n">ratesHistoryData</span><span class="o">);</span>
<span class="nc">Table</span> <span class="n">ratesHistory</span> <span class="o">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="na">fromDataStream</span><span class="o">(</span><span class="n">ratesHistoryStream</span><span class="o">,</span> <span class="err">$</span><span class="o">(</span><span class="s">"r_currency"</span><span class="o">),</span> <span class="err">$</span><span class="o">(</span><span class="s">"r_rate"</span><span class="o">),</span> <span class="err">$</span><span class="o">(</span><span class="s">"r_proctime"</span><span class="o">).</span><span class="na">proctime</span><span class="o">());</span>

<span class="n">tEnv</span><span class="o">.</span><span class="na">createTemporaryView</span><span class="o">(</span><span class="s">"RatesHistory"</span><span class="o">,</span> <span class="n">ratesHistory</span><span class="o">);</span>

<span class="c1">// Create and register a temporal table function.</span>
<span class="c1">// Define "r_proctime" as the time attribute and "r_currency" as the primary key.</span>
<span class="nc">TemporalTableFunction</span> <span class="n">rates</span> <span class="o">=</span> <span class="n">ratesHistory</span><span class="o">.</span><span class="na">createTemporalTableFunction</span><span class="o">(</span><span class="s">"r_proctime"</span><span class="o">,</span> <span class="s">"r_currency"</span><span class="o">);</span> <span class="c1">// &lt;==== (1)</span>
<span class="n">tEnv</span><span class="o">.</span><span class="na">registerFunction</span><span class="o">(</span><span class="s">"Rates"</span><span class="o">,</span> <span class="n">rates</span><span class="o">);</span>                                                              <span class="c1">// &lt;==== (2)</span></code></pre></figure>

  </div>
  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="c1">// Get the stream and table environments.</span>
<span class="k">val</span> <span class="nv">env</span> <span class="k">=</span> <span class="nv">StreamExecutionEnvironment</span><span class="o">.</span><span class="py">getExecutionEnvironment</span>
<span class="k">val</span> <span class="nv">tEnv</span> <span class="k">=</span> <span class="nv">StreamTableEnvironment</span><span class="o">.</span><span class="py">create</span><span class="o">(</span><span class="n">env</span><span class="o">)</span>

<span class="c1">// Provide a static data set of the rates history table.</span>
<span class="k">val</span> <span class="nv">ratesHistoryData</span> <span class="k">=</span> <span class="k">new</span> <span class="nv">mutable</span><span class="o">.</span><span class="py">MutableList</span><span class="o">[(</span><span class="kt">String</span>, <span class="kt">Long</span><span class="o">)]</span>
<span class="n">ratesHistoryData</span><span class="o">.+=((</span><span class="s">"US Dollar"</span><span class="o">,</span> <span class="mi">102L</span><span class="o">))</span>
<span class="n">ratesHistoryData</span><span class="o">.+=((</span><span class="s">"Euro"</span><span class="o">,</span> <span class="mi">114L</span><span class="o">))</span>
<span class="n">ratesHistoryData</span><span class="o">.+=((</span><span class="s">"Yen"</span><span class="o">,</span> <span class="mi">1L</span><span class="o">))</span>
<span class="n">ratesHistoryData</span><span class="o">.+=((</span><span class="s">"Euro"</span><span class="o">,</span> <span class="mi">116L</span><span class="o">))</span>
<span class="n">ratesHistoryData</span><span class="o">.+=((</span><span class="s">"Euro"</span><span class="o">,</span> <span class="mi">119L</span><span class="o">))</span>

<span class="c1">// Create and register an example table using above data set.</span>
<span class="c1">// In the real setup, you should replace this with your own table.</span>
<span class="k">val</span> <span class="nv">ratesHistory</span> <span class="k">=</span> <span class="n">env</span>
  <span class="o">.</span><span class="py">fromCollection</span><span class="o">(</span><span class="n">ratesHistoryData</span><span class="o">)</span>
  <span class="o">.</span><span class="py">toTable</span><span class="o">(</span><span class="n">tEnv</span><span class="o">,</span> <span class="ss">'r_currency</span><span class="o">,</span> <span class="ss">'r_rate</span><span class="o">,</span> <span class="ss">'r_proctime</span><span class="o">.</span><span class="py">proctime</span><span class="o">)</span>

<span class="nv">tEnv</span><span class="o">.</span><span class="py">createTemporaryView</span><span class="o">(</span><span class="s">"RatesHistory"</span><span class="o">,</span> <span class="n">ratesHistory</span><span class="o">)</span>

<span class="c1">// Create and register TemporalTableFunction.</span>
<span class="c1">// Define "r_proctime" as the time attribute and "r_currency" as the primary key.</span>
<span class="k">val</span> <span class="nv">rates</span> <span class="k">=</span> <span class="nv">ratesHistory</span><span class="o">.</span><span class="py">createTemporalTableFunction</span><span class="o">(</span><span class="n">$</span><span class="s">"r_proctime"</span><span class="o">,</span> <span class="n">$</span><span class="s">"r_currency"</span><span class="o">)</span> <span class="c1">// &lt;==== (1)</span>
<span class="nv">tEnv</span><span class="o">.</span><span class="py">registerFunction</span><span class="o">(</span><span class="s">"Rates"</span><span class="o">,</span> <span class="n">rates</span><span class="o">)</span>                                          <span class="c1">// &lt;==== (2)</span></code></pre></figure>

  </div>
</div>

<p>Line <code class="highlighter-rouge">(1)</code> creates a <code class="highlighter-rouge">rates</code> <a href="#temporal-table-function">temporal table function</a>,
which allows us to use the function <code class="highlighter-rouge">rates</code> in the <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/tableApi.html#joins">Table API</a>.</p>

<p>Line <code class="highlighter-rouge">(2)</code> registers this function under the name <code class="highlighter-rouge">Rates</code> in our table environment,
which allows us to use the <code class="highlighter-rouge">Rates</code> function in <a href="//ci.apache.org/projects/flink/flink-docs-release-1.12/dev/table/sql/queries.html#joins">SQL</a>.</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>



<div class="footer">
  <a href="https://cwiki.apache.org/confluence/display/FLINK/Flink+Translation+Specifications" target="_blank">
    
      Want to contribute translation?
    
  </a>
</div>


        </div>
      </div>
    </div><!-- /.container -->

    <!-- default code tab -->
    <script>var defaultCodeTab = "";</script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="//ci.apache.org/projects/flink/flink-docs-release-1.12/page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>
